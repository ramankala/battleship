(()=>{"use strict";const e=e=>{const t=[];return{ship:t,length:e,hit:e=>t[e]="hit",isSunk:()=>{let r=0,o=!1;return t.forEach((function(e){"hit"===e&&(r+=1)})),o=r===e,o}}},t=(t,r=!1)=>{let o=e(5),i=e(4),l=e(3),a=e(3),n=e(2),d={name:t,isActive:r};return{get name(){return d.name},get isActive(){return d.isActive},toggle(){d.isActive=!d.isActive},board:(()=>{let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let t=0;t<10;t++)for(let r=0;r<10;r++)e[t][r]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:e,placeHorizontal:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,r+=1;return e},placeVert:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,t+=1;return e},receiveAttack:(t,r)=>!0===e[t][r].hasShip?(e[t][r].isShot=!0,"Hit"):(e[t][r].isShot=!0,e),allShipsSunk:e=>e.filter((e=>e.isSunk())).length===e.length}})(),ships:[o,i,l,a,n],enemyMove:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}},r=(e,t)=>{let r=document.querySelector(`#container${t}`),o=document.createElement("div");o.setAttribute("id","row1");let i=document.createElement("div");i.setAttribute("id","row2");let l=document.createElement("div");l.setAttribute("id","row3");let a=document.createElement("div");a.setAttribute("id","row4");let n=document.createElement("div");n.setAttribute("id","row5");let d=document.createElement("div");d.setAttribute("id","row6");let s=document.createElement("div");s.setAttribute("id","row7");let c=document.createElement("div");c.setAttribute("id","row8");let u=document.createElement("div");u.setAttribute("id","row9");let g=document.createElement("div");g.setAttribute("id","row10"),e.forEach((function(e,h){e.forEach((function(e,m){let p=document.createElement("div");p.setAttribute("id",`squareDiv${h}${m}`),p.setAttribute("data-y-coord",m),p.setAttribute("data-x-coord",h),p.setAttribute("data-has-ship",e.hasShip),p.setAttribute("data-is-shot",e.isShot),p.classList.add(`atkDiv${t}`),p.textContent=e.hasShip;for(let e=0;e<10;e++)p.getAttribute("id")==`squareDiv0${e}`?o.appendChild(p):p.getAttribute("id")==`squareDiv1${e}`?i.appendChild(p):p.getAttribute("id")==`squareDiv2${e}`?l.appendChild(p):p.getAttribute("id")==`squareDiv3${e}`?a.appendChild(p):p.getAttribute("id")==`squareDiv4${e}`?n.appendChild(p):p.getAttribute("id")==`squareDiv5${e}`?d.appendChild(p):p.getAttribute("id")==`squareDiv6${e}`?s.appendChild(p):p.getAttribute("id")==`squareDiv7${e}`?c.appendChild(p):p.getAttribute("id")==`squareDiv8${e}`?u.appendChild(p):p.getAttribute("id")==`squareDiv9${e}`&&g.appendChild(p);r.appendChild(o),r.appendChild(i),r.appendChild(l),r.appendChild(a),r.appendChild(n),r.appendChild(d),r.appendChild(s),r.appendChild(c),r.appendChild(u),r.appendChild(g)}))}))},o=(e,t,r)=>{let o,l,a,n,d,s=t.board,c=t.ships,u=document.getElementsByClassName(`atkDiv${r}`),g=0,h=0,m=0,p=0,y=0;for(let r=0;r<u.length;r++)u[r].addEventListener("click",(function(r){if(!0===e.isActive&&(l=r.target.getAttribute("data-y-coord"),a=r.target.getAttribute("data-x-coord"),o=s.gameBoard[a][l].isShot,n=s.gameBoard[a][l].shipLength,d=s.gameBoard[a][l].shipType,!1===o)){if("true"===r.target.getAttribute("data-has-ship")?r.target.style.backgroundColor="red":r.target.style.backgroundColor="grey",console.log(a),console.log(l),s.receiveAttack(a,l),!0===s.allShipsSunk(c))return void console.log("Player won!");if(!0===e.board.allShipsSunk(e.ships))return void console.log("Computer won!");"Carrier"==d?(c.filter((e=>e.length==n))[0].hit(g),g+=1):"Battleship"==d?(c.filter((e=>e.length==n))[0].hit(h),h+=1):"Destroyer"==d?(c.filter((e=>e.length==n))[0].hit(m),m+=1):"Submarine"==d?(c.filter((e=>e.length==n))[1].hit(p),p+=1):"Patrolboat"==d&&(c.filter((e=>e.length==n))[0].hit(y),y+=1),e.toggle(),t.toggle();let o=e.enemyMove();console.log(o),i(e,t,o[0],o[1])}}))},i=(e,t,r,o)=>{let l,a=e.board,n=e.ships,d=a.gameBoard[r][o].isShot,s=a.gameBoard[r][o].hasShip,c=a.gameBoard[r][o].shipLength,u=a.gameBoard[r][o].shipType;l=0===r?o:""+r+o;let g=document.getElementsByClassName("atkDiv1")[l],h=0,m=0,p=0,y=0,f=0;if(!0===t.isActive)if(!1===d){if(g.style.backgroundColor=!0===s?"red":"grey",a.receiveAttack(r,o),!0===a.allShipsSunk(n))return void console.log("Computer won!");if(!0===t.board.allShipsSunk(t.ships))return void console.log("User won!");"Carrier"==u?(n.filter((e=>e.length==c))[0].hit(h),h+=1):"Battleship"==u?(n.filter((e=>e.length==c))[0].hit(m),m+=1):"Destroyer"==u?(n.filter((e=>e.length==c))[0].hit(p),p+=1):"Submarine"==u?(n.filter((e=>e.length==c))[1].hit(y),y+=1):"Patrolboat"==u&&(n.filter((e=>e.length==c))[0].hit(f),f+=1),e.toggle(),t.toggle()}else{let r=e.enemyMove();i(e,t,r[0],r[1])}};(()=>{const e=document.querySelector("#startBtn"),i=document.querySelector("#alignBtn"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),d=document.querySelector("#Submarine"),s=document.querySelector("#PatrolBoat");l.classList.add("horizontal"),a.classList.add("horizontal"),n.classList.add("horizontal"),d.classList.add("horizontal"),s.classList.add("horizontal"),l.style.flexDirection="row",l.setAttribute("data-alignment","row");const c=[t("player1",!0),t("computer",!1)],u=e=>{e.dataTransfer.setData("text/plain",e.target.id),e.currentTarget.style.backgroundColor="green"};l.addEventListener("dragstart",u),a.addEventListener("dragstart",u),n.addEventListener("dragstart",u),d.addEventListener("dragstart",u),s.addEventListener("dragstart",u),r(c[0].board.gameBoard,1),i.addEventListener("click",(function(){"row"===l.style.flexDirection?(l.style.flexDirection="column",a.style.flexDirection="column",n.style.flexDirection="column",d.style.flexDirection="column",s.style.flexDirection="column",l.setAttribute("data-alignment","column")):(l.style.flexDirection="row",a.style.flexDirection="row",n.style.flexDirection="row",d.style.flexDirection="row",s.style.flexDirection="row",l.setAttribute("data-alignment","row"))})),(e=>{const t=e=>{e.preventDefault()},r=t=>{t.preventDefault(),console.log(t.target.getAttribute("data-y-coord")),console.log(t.target.getAttribute("data-x-coord"));let r=parseInt(t.target.getAttribute("data-x-coord")),o=parseInt(t.target.getAttribute("data-y-coord")),i=t.dataTransfer.getData("text"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),d=document.querySelector("#Submarine"),s=document.querySelector("#PatrolBoat"),c=l.getAttribute("data-alignment");if(console.log(e),"Carrier"===i){if(console.log(c),"row"===c){e.placeHorizontal(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}l.style.display="none"}if("Battleship"===i){if("row"===c){e.placeHorizontal(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}a.style.display="none"}if("Destroyer"===i){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}n.style.display="none"}if("Submarine"===i){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}d.style.display="none"}if("PatrolBoat"===i){if("row"===c){e.placeHorizontal(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}s.style.display="none"}};let o=document.getElementsByClassName("atkDiv1");for(let e=0;e<o.length;e++)o[e].addEventListener("dragover",t),o[e].addEventListener("drop",r)})(c[0].board),e.addEventListener("click",(function(){(()=>{let e=document.querySelector("#container1");for(;e.firstChild;)e.removeChild(e.firstChild)})(),r(c[0].board.gameBoard,1),r(c[1].board.gameBoard,2),o(c[0],c[1],2),o(c[1],c[0],2)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVLEdBQUc5RSxNQUFNQyxVQUFXLEdBQzNDdUIsRUFBYXNELEVBQVUsR0FBRzlFLE1BQU1DLFVBQVcsR0FDM0NpRCxFQUFZNEIsRUFBVSxHQUFJQSxFQUFVLEdBQUksR0FDeEM1QixFQUFZNEIsRUFBVSxHQUFJQSxFQUFVLEdBQUksT0NuRWhEdUIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaGlwRmFjdG9yeSB9IGZyb20gJy4vc2hpcEZhY3RvcnknO1xuXG5jb25zdCBnYW1lQm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBbXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9ICh7aGFzU2hpcDogZmFsc2UsIGlzU2hvdDogZmFsc2UsIHNoaXBMZW5ndGg6IDAsIHNoaXBUeXBlOiAnbi9hJywgeFBvaW50OiAwLCB5UG9pbnQ6IDB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICBjb25zdCBwbGFjZUhvcml6b250YWwgPSAoeCwgeSwgc2hpcExlbmd0aCwgc2hpcFR5cGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGggPSBzaGlwTGVuZ3RoO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlID0gc2hpcFR5cGU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueFBvaW50ID0geDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS55UG9pbnQgPSB5O1xuICAgICAgICAgICAgeSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgfVxuICAgIGNvbnN0IHBsYWNlVmVydCA9ICh4LCB5LCBzaGlwTGVuZ3RoLCBzaGlwVHlwZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9IHRydWU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcExlbmd0aCA9IHNoaXBMZW5ndGg7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcFR5cGUgPSBzaGlwVHlwZTtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS54UG9pbnQgPSB4O1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnlQb2ludCA9IHk7XG4gICAgICAgICAgICB4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKHgsIHkpID0+IHtcbiAgICAgICAgaWYgKGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwID09PSB0cnVlKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5pc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuICdIaXQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFsbFNoaXBzU3VuayA9IChhcnIpID0+IHtcbiAgICAgICAgY29uc3Qgc3Vua2VuU2hpcHMgPSBhcnIuZmlsdGVyKHNoaXBzID0+IHNoaXBzLmlzU3VuaygpKTtcbiAgICAgICAgaWYgKHN1bmtlblNoaXBzLmxlbmd0aCA9PT0gYXJyLmxlbmd0aCl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2FtZUJvYXJkLFxuICAgICAgICBwbGFjZUhvcml6b250YWwsXG4gICAgICAgIHBsYWNlVmVydCxcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgYWxsU2hpcHNTdW5rLFxuICAgIH1cbn07XG5cbmV4cG9ydCB7IGdhbWVCb2FyZEZhY3RvcnkgfTsiLCJcbmNvbnN0IHNoaXBGYWN0b3J5ID0gKGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHNoaXAgPSBbXTtcblxuICAgIGNvbnN0IGhpdCA9IChwb3MpID0+IHNoaXBbcG9zXSA9ICdoaXQnO1xuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBsZXQgc3VuayA9IGZhbHNlO1xuXG4gICAgICAgIHNoaXAuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgIGlmIChpdGVtID09PSAnaGl0Jyl7XG4gICAgICAgICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb3VudCA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdW5rID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1bmsgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdW5rO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzaGlwLFxuICAgICAgICBsZW5ndGgsXG4gICAgICAgIGhpdCxcbiAgICAgICAgaXNTdW5rLFxuICAgIH1cbn07XG5cbmV4cG9ydCB7IHNoaXBGYWN0b3J5IH07IiwiaW1wb3J0IHsgZ2FtZUJvYXJkRmFjdG9yeSB9IGZyb20gJy4vZ2FtZUJvYXJkRmFjdG9yeSc7XG5pbXBvcnQgeyBzaGlwRmFjdG9yeSB9IGZyb20gJy4vc2hpcEZhY3RvcnknO1xuXG5jb25zdCBQbGF5ZXIgPSAobmFtZSwgaXNBY3RpdmUgPSBmYWxzZSkgPT4ge1xuXG4gICAgbGV0IGNhcnJpZXIgPSBzaGlwRmFjdG9yeSg1KTtcbiAgICBsZXQgYmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KDQpO1xuICAgIGxldCBkZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgzKTtcbiAgICBsZXQgc3VibWFyaW5lID0gc2hpcEZhY3RvcnkoMyk7XG4gICAgbGV0IHBhdHJvbEJvYXQgPSBzaGlwRmFjdG9yeSgyKTtcbiAgICBcbiAgICBsZXQgc3RhdGUgPSB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGlzQWN0aXZlLFxuICAgIH1cblxuICAgIGxldCBib2FyZCA9IGdhbWVCb2FyZEZhY3RvcnkoKTtcblxuICAgIGxldCBzaGlwcyA9IFtjYXJyaWVyLCBiYXR0bGVzaGlwLCBkZXN0cm95ZXIsIHN1Ym1hcmluZSwgcGF0cm9sQm9hdF07XG5cbiAgICBjb25zdCBlbmVteU1vdmUgPSAoKSA9PiB7XG4gICAgICAgIGxldCB4ID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSk7XG4gICAgICAgIGxldCB5ID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSk7XG5cbiAgICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgbmFtZSgpe3JldHVybiBzdGF0ZS5uYW1lO30sXG4gICAgICAgIGdldCBpc0FjdGl2ZSgpe3JldHVybiBzdGF0ZS5pc0FjdGl2ZTt9LFxuICAgICAgICB0b2dnbGUoKXsgc3RhdGUuaXNBY3RpdmUgPSAhc3RhdGUuaXNBY3RpdmU7fSxcbiAgICAgICAgYm9hcmQsXG4gICAgICAgIHNoaXBzLFxuICAgICAgICBlbmVteU1vdmUsXG4gICAgfVxufTtcblxuZXhwb3J0IHsgUGxheWVyIH07IiwiY29uc3QgcmVuZGVyR0JvYXJkID0gKGdhbWVCb2FyZCwgbnVtKSA9PiB7XG4gICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjb250YWluZXIke251bX1gKTtcbiAgICBsZXQgcm93MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzEuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cxJyk7XG4gICAgbGV0IHJvdzIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cyLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MicpO1xuICAgIGxldCByb3czID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93My5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzMnKTtcbiAgICBsZXQgcm93NCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzQuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c0Jyk7XG4gICAgbGV0IHJvdzUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c1LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NScpO1xuICAgIGxldCByb3c2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Ni5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzYnKTtcbiAgICBsZXQgcm93NyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzcuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c3Jyk7XG4gICAgbGV0IHJvdzggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c4LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93OCcpO1xuICAgIGxldCByb3c5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93OS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzknKTtcbiAgICBsZXQgcm93MTAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cxMC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzEwJyk7XG5cbiAgICBnYW1lQm9hcmQuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICBpdGVtLmZvckVhY2goZnVuY3Rpb24oc3ViaXRlbSwgc3ViaW5kZXgpIHtcbiAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2lkJywgYHNxdWFyZURpdiR7aW5kZXh9JHtzdWJpbmRleH1gKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcsIHN1YmluZGV4KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcsIGluZGV4KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzLXNoaXAnLCBzdWJpdGVtLmhhc1NoaXApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1pcy1zaG90Jywgc3ViaXRlbS5pc1Nob3QpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LmNsYXNzTGlzdC5hZGQoYGF0a0RpdiR7bnVtfWApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnRleHRDb250ZW50ID0gc3ViaXRlbS5oYXNTaGlwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93MS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MiR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93My5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MyR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93NC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93NS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Ni5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NiR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Ny5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NyR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93OC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2OCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93OS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2OSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93MTAuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93MSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Mik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Myk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93NCk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93NSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Nik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Nyk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93OCk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93OSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93MTApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGF0a0xpc3RlbmVyID0gKHBsYXllciwgZW5lbXksIG51bSkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBlbmVteS5ib2FyZDtcbiAgICBsZXQgc2hpcHMgPSBlbmVteS5zaGlwcztcbiAgICBsZXQgcmVzcG9uc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGBhdGtEaXYke251bX1gKTtcbiAgICBsZXQgaXNTaG90O1xuICAgIGxldCB5UG9pbnQ7XG4gICAgbGV0IHhQb2ludDtcbiAgICBsZXQgc2hpcExlbmd0aDtcbiAgICBsZXQgc2hpcFR5cGU7XG4gICAgbGV0IHBvczUgPSAwO1xuICAgIGxldCBwb3M0ID0gMDtcbiAgICBsZXQgcG9zMyA9IDA7XG4gICAgbGV0IHBvczIgPSAwO1xuICAgIGxldCBwb3MxID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UubGVuZ3RoOyBpKyspe1xuICAgICAgICByZXNwb25zZVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHlQb2ludCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJyk7XG4gICAgICAgICAgICAgICAgeFBvaW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKTtcbiAgICAgICAgICAgICAgICBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5pc1Nob3Q7XG4gICAgICAgICAgICAgICAgc2hpcExlbmd0aCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLnNoaXBMZW5ndGg7XG4gICAgICAgICAgICAgICAgc2hpcFR5cGUgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5zaGlwVHlwZTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1Nob3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzLXNoaXAnKSA9PT0gJ3RydWUnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZXknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHlQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKHhQb2ludCwgeVBvaW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZUJvYXJkLmFsbFNoaXBzU3VuayhzaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgd29uIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsYXllci5ib2FyZC5hbGxTaGlwc1N1bmsocGxheWVyLnNoaXBzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXB1dGVyIHdvbiEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBUeXBlID09ICdDYXJyaWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M1ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnRGVzdHJveWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgcG9zMyArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdTdWJtYXJpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzFdLmhpdChwb3MyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczIgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnUGF0cm9sYm9hdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zMSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZW5lbXkudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlcyA9IHBsYXllci5lbmVteU1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICBlbmVteUF0dGFjayhwbGF5ZXIsIGVuZW15LCBjb29yZGluYXRlc1swXSwgY29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufTtcblxuY29uc3QgZW5lbXlBdHRhY2sgPSAocGxheWVyLCBlbmVteSwgeCwgeSkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBwbGF5ZXIuYm9hcmQ7XG4gICAgbGV0IHNoaXBzID0gcGxheWVyLnNoaXBzO1xuICAgIGxldCBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdDs7XG4gICAgbGV0IGhhc1NoaXAgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXA7XG4gICAgbGV0IHNoaXBMZW5ndGggPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGg7XG4gICAgbGV0IHNoaXBUeXBlID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5zaGlwVHlwZTtcbiAgICBsZXQgcGFuZWw7XG4gICAgaWYgKHggPT09IDApe1xuICAgICAgICBwYW5lbCA9IHk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGFuZWwgPSAnJyArIHggKyB5O1xuICAgIH1cbiAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXRrRGl2MScpW3BhbmVsXTsgIFxuICAgIGxldCBwb3M1ID0gMDtcbiAgICBsZXQgcG9zNCA9IDA7XG4gICAgbGV0IHBvczMgPSAwO1xuICAgIGxldCBwb3MyID0gMDtcbiAgICBsZXQgcG9zMSA9IDA7XG5cbiAgICBpZiAoZW5lbXkuaXNBY3RpdmUgPT09IHRydWUpIHtcblxuICAgICAgICBpZiAoaXNTaG90ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKGhhc1NoaXAgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmV5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZ2FtZUJvYXJkLmFsbFNoaXBzU3VuayhzaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcHV0ZXIgd29uIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5lbXkuYm9hcmQuYWxsU2hpcHNTdW5rKGVuZW15LnNoaXBzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHdvbiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoc2hpcFR5cGUgPT0gJ0NhcnJpZXInKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M1KTtcbiAgICAgICAgICAgICAgICBwb3M1ICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNCk7XG4gICAgICAgICAgICAgICAgcG9zNCArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnRGVzdHJveWVyJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMyk7XG4gICAgICAgICAgICAgICAgICAgIHBvczMgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMV0uaGl0KHBvczIpO1xuICAgICAgICAgICAgICAgIHBvczIgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1BhdHJvbGJvYXQnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MxKTtcbiAgICAgICAgICAgICAgICBwb3MxICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICBlbmVteS50b2dnbGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlcyA9IHBsYXllci5lbmVteU1vdmUoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIGVuZW15QXR0YWNrKHBsYXllciwgZW5lbXksIGNvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1sxXSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfTtcbn07XG5cbmNvbnN0IHBsYWNlUGllY2VzID0gKHBsYXllcikgPT4ge1xuXG4gICAgY29uc3Qgb25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgY29uc3Qgb25Ecm9wID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcpKTtcbiAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKSk7XG4gICAgICAgIGxldCB4ID0gcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKSk7XG4gICAgICAgIGxldCB5ID0gcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKSk7XG4gICAgICAgIC8vIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgIGxldCBkYXRhID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dCcpO1xuICAgICAgICBsZXQgY2FycmllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNDYXJyaWVyJyk7XG4gICAgICAgIGxldCBiYXR0bGVTaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0JhdHRsZXNoaXAnKTtcbiAgICAgICAgbGV0IGRlc3Ryb3llciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNEZXN0cm95ZXInKTtcbiAgICAgICAgbGV0IHN1Yk1hcmluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNTdWJtYXJpbmUnKTtcbiAgICAgICAgbGV0IHBhdHJvbEIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjUGF0cm9sQm9hdCcpO1xuICAgICAgICBsZXQgYWxpZ24gPSBjYXJyaWVyLmdldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnKTtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyKTtcbiAgICAgICAgaWYgKGRhdGEgPT09ICdDYXJyaWVyJyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhbGlnbik7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCA1LCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXJyaWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAvLyBoaWRlIHRoZSBzaGlwIHBpZWNlcyBhZnRlciBwbGFjaW5nIHRoZW1cblxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSAnQmF0dGxlc2hpcCcpe1xuICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCA0LCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgNCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmF0dGxlU2hpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSAnRGVzdHJveWVyJyl7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZXN0cm95ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PT0gJ1N1Ym1hcmluZScpe1xuICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgMywgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViTWFyaW5lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdQYXRyb2xCb2F0Jyl7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDIsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAyLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRyb2xCLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJlc3BvbnNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXRrRGl2MScpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25EcmFnT3Zlcik7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3ApO1xuICAgIH07XG5cbn1cblxuY29uc3QgZGVSZW5kZXIgPSAoKSA9PiB7XG4gICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGFpbmVyMVwiKTtcbiAgICB3aGlsZSAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHBhcmVudC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFxuXG4gICAgcmVuZGVyR0JvYXJkLFxuICAgIGF0a0xpc3RlbmVyLFxuICAgIHBsYWNlUGllY2VzLFxuICAgIGRlUmVuZGVyLFxuIH07IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi9wbGF5ZXJGYWN0b3J5JztcbmltcG9ydCB7IHJlbmRlckdCb2FyZCwgYXRrTGlzdGVuZXIsIHBsYWNlUGllY2VzLCBkZVJlbmRlciB9IGZyb20gJy4vcmVuZGVyJztcblxuY29uc3QgZ2FtZSA9ICgpID0+IHtcblxuICAgIGNvbnN0IHN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0QnRuJyk7XG4gICAgY29uc3QgYWxpZ25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxpZ25CdG4nKTtcbiAgICBjb25zdCBjYXJyaWVyRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNDYXJyaWVyJyk7XG4gICAgY29uc3QgYmF0dGxlRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNCYXR0bGVzaGlwJyk7XG4gICAgY29uc3QgZGVzdHJEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0Rlc3Ryb3llcicpO1xuICAgIGNvbnN0IHN1YkRyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjU3VibWFyaW5lJyk7XG4gICAgY29uc3QgcGF0cm9sRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNQYXRyb2xCb2F0Jyk7XG4gICAgY2FycmllckRyYWcuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgIGJhdHRsZURyYWcuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgIGRlc3RyRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgc3ViRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgcGF0cm9sRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgY2FycmllckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgIGNhcnJpZXJEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAncm93Jyk7XG5cbiAgICBjb25zdCBwbGF5ZXJBcnIgPSBbXG4gICAgICAgIFBsYXllcihcInBsYXllcjFcIiwgdHJ1ZSksXG4gICAgICAgIFBsYXllcihcImNvbXB1dGVyXCIsIGZhbHNlKVxuICAgIF07XG5cbiAgICBjb25zdCBvbkRyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBlLnRhcmdldC5pZCk7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgIH1cblxuICAgIGNhcnJpZXJEcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcbiAgICBiYXR0bGVEcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcbiAgICBkZXN0ckRyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIHN1YkRyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIHBhdHJvbERyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuXG4gICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQsIDEpO1xuXG4gICAgYWxpZ25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoY2FycmllckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgY2FycmllckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgYmF0dGxlRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBkZXN0ckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgc3ViRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBwYXRyb2xEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIGNhcnJpZXJEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAnY29sdW1uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBiYXR0bGVEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIGRlc3RyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBzdWJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIHBhdHJvbERyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgY2FycmllckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcbiAgICAgICAgfVxuXG4gICAgfSlcblxuICAgIHBsYWNlUGllY2VzKHBsYXllckFyclswXS5ib2FyZCk7XG5cbiAgICAvL2NyZWF0ZSBwbGF5ZXIgYW5kIGNvbXB1dGVyIHBsYXllclxuICAgIC8vcG9wdWxhdGUgZ2FtZWJvYXJkcyBmb3IgYm90aCBwbGF5ZXJzXG4gICAgLy8gcGxhY2VQaWVjZXMocGxheWVyQXJyWzBdLmJvYXJkLCBhbGlnbik7XG5cbiAgICBzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGRlUmVuZGVyKCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQpO1xuICAgICAgICByZW5kZXJHQm9hcmQocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCwgMSk7XG4gICAgICAgIHJlbmRlckdCb2FyZChwbGF5ZXJBcnJbMV0uYm9hcmQuZ2FtZUJvYXJkLCAyKTtcbiAgICAgICAgYXRrTGlzdGVuZXIocGxheWVyQXJyWzBdLCBwbGF5ZXJBcnJbMV0sIDIpO1xuICAgICAgICBhdGtMaXN0ZW5lcihwbGF5ZXJBcnJbMV0sIHBsYXllckFyclswXSwgMik7XG4gICAgfSk7XG5cbn07XG5cbmV4cG9ydCB7IGdhbWUgfTsiLCJpbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9nYW1lJztcblxuZ2FtZSgpOyJdLCJuYW1lcyI6WyJzaGlwRmFjdG9yeSIsImxlbmd0aCIsInNoaXAiLCJoaXQiLCJwb3MiLCJpc1N1bmsiLCJjb3VudCIsInN1bmsiLCJmb3JFYWNoIiwiaXRlbSIsIlBsYXllciIsIm5hbWUiLCJpc0FjdGl2ZSIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sQm9hdCIsInN0YXRlIiwidG9nZ2xlIiwiYm9hcmQiLCJnYW1lQm9hcmQiLCJpIiwiaiIsImhhc1NoaXAiLCJpc1Nob3QiLCJzaGlwTGVuZ3RoIiwic2hpcFR5cGUiLCJ4UG9pbnQiLCJ5UG9pbnQiLCJwbGFjZUhvcml6b250YWwiLCJ4IiwieSIsInBsYWNlVmVydCIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJhcnIiLCJmaWx0ZXIiLCJzaGlwcyIsImdhbWVCb2FyZEZhY3RvcnkiLCJlbmVteU1vdmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyZW5kZXJHQm9hcmQiLCJudW0iLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3cxIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJvdzIiLCJyb3czIiwicm93NCIsInJvdzUiLCJyb3c2Iiwicm93NyIsInJvdzgiLCJyb3c5Iiwicm93MTAiLCJpbmRleCIsInN1Yml0ZW0iLCJzdWJpbmRleCIsInNxdWFyZURpdiIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJhdGtMaXN0ZW5lciIsInBsYXllciIsImVuZW15IiwicmVzcG9uc2UiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicG9zNSIsInBvczQiLCJwb3MzIiwicG9zMiIsInBvczEiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiY29uc29sZSIsImxvZyIsImNvb3JkaW5hdGVzIiwiZW5lbXlBdHRhY2siLCJwYW5lbCIsInN0YXJ0QnRuIiwiYWxpZ25CdG4iLCJjYXJyaWVyRHJhZyIsImJhdHRsZURyYWciLCJkZXN0ckRyYWciLCJzdWJEcmFnIiwicGF0cm9sRHJhZyIsImZsZXhEaXJlY3Rpb24iLCJwbGF5ZXJBcnIiLCJvbkRyYWdTdGFydCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJpZCIsImN1cnJlbnRUYXJnZXQiLCJvbkRyYWdPdmVyIiwicHJldmVudERlZmF1bHQiLCJvbkRyb3AiLCJwYXJzZUludCIsImRhdGEiLCJnZXREYXRhIiwiYmF0dGxlU2hpcCIsInN1Yk1hcmluZSIsInBhdHJvbEIiLCJhbGlnbiIsImdldEVsZW1lbnRCeUlkIiwiZGlzcGxheSIsInBsYWNlUGllY2VzIiwicGFyZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGVSZW5kZXIiLCJnYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==