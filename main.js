(()=>{"use strict";const t=t=>{const e=[];return{ship:e,length:t,hit:t=>e[t]="hit",isSunk:()=>{let i=0,r=!1;return e.forEach((function(t){"hit"===t&&(i+=1)})),r=i===t,r}}},e=(e,i=!1)=>{let r=t(5),a=t(4),d=t(3),o=t(3),l=t(2),n={name:e,isActive:i};return{get name(){return n.name},get isActive(){return n.isActive},toggle(){n.isActive=!n.isActive},board:(()=>{let t=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let e=0;e<10;e++)for(let i=0;i<10;i++)t[e][i]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:t,placeShip:(e,i,r,a)=>{for(let d=0;d<r;d++)t[e][i].hasShip=!0,t[e][i].shipLength=r,t[e][i].shipType=a,t[e][i].xPoint=e,t[e][i].yPoint=i,i+=1;return t},receiveAttack:(e,i)=>!0===t[e][i].hasShip?(t[e][i].isShot=!0,"Hit"):(t[e][i].isShot=!0,t),allShipsSunk:t=>t.filter((t=>t.isSunk())).length===t.length}})(),ships:[r,a,d,o,l]}},i=(t,e)=>{let i=document.querySelector(`#container${e}`),r=document.createElement("div");r.setAttribute("id","row1");let a=document.createElement("div");a.setAttribute("id","row2");let d=document.createElement("div");d.setAttribute("id","row3");let o=document.createElement("div");o.setAttribute("id","row4");let l=document.createElement("div");l.setAttribute("id","row5");let n=document.createElement("div");n.setAttribute("id","row6");let h=document.createElement("div");h.setAttribute("id","row7");let p=document.createElement("div");p.setAttribute("id","row8");let s=document.createElement("div");s.setAttribute("id","row9");let u=document.createElement("div");u.setAttribute("id","row10"),t.forEach((function(t,c){t.forEach((function(t,g){let b=document.createElement("div");b.setAttribute("id",`squareDiv${c}${g}`),b.setAttribute("data-y-coord",c),b.setAttribute("data-x-coord",g),b.setAttribute("data-has-ship",t.hasShip),b.setAttribute("data-is-shot",t.isShot),b.classList.add(`atkDiv${e}`),b.textContent=t.hasShip;for(let t=0;t<10;t++)b.getAttribute("id")==`squareDiv0${t}`?r.appendChild(b):b.getAttribute("id")==`squareDiv1${t}`?a.appendChild(b):b.getAttribute("id")==`squareDiv2${t}`?d.appendChild(b):b.getAttribute("id")==`squareDiv3${t}`?o.appendChild(b):b.getAttribute("id")==`squareDiv4${t}`?l.appendChild(b):b.getAttribute("id")==`squareDiv5${t}`?n.appendChild(b):b.getAttribute("id")==`squareDiv6${t}`?h.appendChild(b):b.getAttribute("id")==`squareDiv7${t}`?p.appendChild(b):b.getAttribute("id")==`squareDiv8${t}`?s.appendChild(b):b.getAttribute("id")==`squareDiv9${t}`&&u.appendChild(b);i.appendChild(r),i.appendChild(a),i.appendChild(d),i.appendChild(o),i.appendChild(l),i.appendChild(n),i.appendChild(h),i.appendChild(p),i.appendChild(s),i.appendChild(u)}))}))},r=(t,e,i)=>{let r,a,d,o,l,n=t.board,h=t.ships,p=document.getElementsByClassName(`atkDiv${i}`),s=0,u=0,c=0,g=0,b=0;for(let i=0;i<p.length;i++)p[i].addEventListener("click",(function(i){!0===t.isActive&&(a=i.target.getAttribute("data-y-coord"),d=i.target.getAttribute("data-y-coord"),r=n.gameBoard[d][a].isShot,console.log(r),o=n.gameBoard[d][a].shipLength,l=n.gameBoard[d][a].shipType,!1===r)&&("true"===i.target.getAttribute("data-has-ship")?i.target.style.backgroundColor="red":i.target.style.backgroundColor="grey",n.receiveAttack(d,a),"Carrier"==l?(h.filter((t=>t.length==o))[0].hit(s),s+=1):"Battleship"==l?(h.filter((t=>t.length==o))[0].hit(u),u+=1):"Destroyer"==l?(h.filter((t=>t.length==o))[0].hit(c),c+=1):"Submarine"==l?(h.filter((t=>t.length==o))[1].hit(g),g+=1):"Patrolboat"==l&&(h.filter((t=>t.length==o))[0].hit(b),b+=1),t.toggle(),e.toggle(),console.log(n.gameBoard[d][a]))}))};(()=>{const t=[e("player1",!0),e("computer",!1)];t[0].board.placeShip(2,2,5,"Carrier"),t[0].board.placeShip(8,0,4,"Battleship"),t[0].board.placeShip(6,7,3,"Destroyer"),t[0].board.placeShip(5,1,3,"Submarine"),t[0].board.placeShip(1,7,2,"Patrolboat"),console.log(t[0].board.gameBoard),i(t[0].board.gameBoard,1),t[1].board.placeShip(8,1,5,"Carrier"),t[1].board.placeShip(3,5,4,"Battleship"),t[1].board.placeShip(6,3,3,"Destroyer"),t[1].board.placeShip(1,1,3,"Submarine"),t[1].board.placeShip(0,6,2,"Patrolboat"),console.log(t[1].board.gameBoard),i(t[1].board.gameBoard,2),r(t[0],t[1],1),r(t[1],t[0],2)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUQsRUFBVUEsVUFBVU8sR0FBUUMsU0NqSS9DLE1BS1QsTUFBTXFELEVBQVksQ0FDZHhFLEVBQU8sV0FBVyxHQUNsQkEsRUFBTyxZQUFZLElBR3ZCd0UsRUFBVSxHQUFHOUQsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxXQUN0Q29ELEVBQVUsR0FBRzlELE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsY0FDdENvRCxFQUFVLEdBQUc5RCxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGFBQ3RDb0QsRUFBVSxHQUFHOUQsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxhQUN0Q29ELEVBQVUsR0FBRzlELE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsY0FDdENnRCxRQUFRQyxJQUFJRyxFQUFVLEdBQUc5RCxNQUFNQyxXQUMvQmtCLEVBQWEyQyxFQUFVLEdBQUc5RCxNQUFNQyxVQUFXLEdBRTNDNkQsRUFBVSxHQUFHOUQsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxXQUN0Q29ELEVBQVUsR0FBRzlELE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsY0FDdENvRCxFQUFVLEdBQUc5RCxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGFBQ3RDb0QsRUFBVSxHQUFHOUQsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxhQUN0Q29ELEVBQVUsR0FBRzlELE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsY0FDdENnRCxRQUFRQyxJQUFJRyxFQUFVLEdBQUc5RCxNQUFNQyxXQUMvQmtCLEVBQWEyQyxFQUFVLEdBQUc5RCxNQUFNQyxVQUFXLEdBRTNDNEMsRUFBWWlCLEVBQVUsR0FBSUEsRUFBVSxHQUFJLEdBQ3hDakIsRUFBWWlCLEVBQVUsR0FBSUEsRUFBVSxHQUFJLElDNUI1Q0MsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaGlwRmFjdG9yeSB9IGZyb20gJy4vc2hpcEZhY3RvcnknO1xuXG5jb25zdCBnYW1lQm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBbXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9ICh7aGFzU2hpcDogZmFsc2UsIGlzU2hvdDogZmFsc2UsIHNoaXBMZW5ndGg6IDAsIHNoaXBUeXBlOiAnbi9hJywgeFBvaW50OiAwLCB5UG9pbnQ6IDB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoeCwgeSwgc2hpcExlbmd0aCwgc2hpcFR5cGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGggPSBzaGlwTGVuZ3RoO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlID0gc2hpcFR5cGU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueFBvaW50ID0geDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS55UG9pbnQgPSB5O1xuICAgICAgICAgICAgeSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaXNTaG90ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAnSGl0JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5pc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBhbGxTaGlwc1N1bmsgPSAoYXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1bmtlblNoaXBzID0gYXJyLmZpbHRlcihzaGlwcyA9PiBzaGlwcy5pc1N1bmsoKSk7XG4gICAgICAgIGlmIChzdW5rZW5TaGlwcy5sZW5ndGggPT09IGFyci5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdhbWVCb2FyZCxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBhbGxTaGlwc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgZ2FtZUJvYXJkRmFjdG9yeSB9OyIsIlxuY29uc3Qgc2hpcEZhY3RvcnkgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFtdO1xuXG4gICAgY29uc3QgaGl0ID0gKHBvcykgPT4gc2hpcFtwb3NdID0gJ2hpdCc7XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGxldCBzdW5rID0gZmFsc2U7XG5cbiAgICAgICAgc2hpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICdoaXQnKXtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvdW50ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN1bmsgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VuayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1bms7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNoaXAsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgaGl0LFxuICAgICAgICBpc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgc2hpcEZhY3RvcnkgfTsiLCJpbXBvcnQgeyBnYW1lQm9hcmRGYWN0b3J5IH0gZnJvbSAnLi9nYW1lQm9hcmRGYWN0b3J5JztcbmltcG9ydCB7IHNoaXBGYWN0b3J5IH0gZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmNvbnN0IFBsYXllciA9IChuYW1lLCBpc0FjdGl2ZSA9IGZhbHNlKSA9PiB7XG5cbiAgICBsZXQgY2FycmllciA9IHNoaXBGYWN0b3J5KDUpO1xuICAgIGxldCBiYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoNCk7XG4gICAgbGV0IGRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KDMpO1xuICAgIGxldCBzdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgzKTtcbiAgICBsZXQgcGF0cm9sQm9hdCA9IHNoaXBGYWN0b3J5KDIpO1xuICAgIFxuICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaXNBY3RpdmUsXG4gICAgfVxuXG4gICAgbGV0IGJvYXJkID0gZ2FtZUJvYXJkRmFjdG9yeSgpO1xuXG4gICAgbGV0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGRlc3Ryb3llciwgc3VibWFyaW5lLCBwYXRyb2xCb2F0XTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBuYW1lKCl7cmV0dXJuIHN0YXRlLm5hbWU7fSxcbiAgICAgICAgZ2V0IGlzQWN0aXZlKCl7cmV0dXJuIHN0YXRlLmlzQWN0aXZlO30sXG4gICAgICAgIHRvZ2dsZSgpeyBzdGF0ZS5pc0FjdGl2ZSA9ICFzdGF0ZS5pc0FjdGl2ZTt9LFxuICAgICAgICBib2FyZCxcbiAgICAgICAgc2hpcHMsXG4gICAgfVxufTtcblxuZXhwb3J0IHsgUGxheWVyIH07IiwiY29uc3QgcmVuZGVyR0JvYXJkID0gKGdhbWVCb2FyZCwgbnVtKSA9PiB7XG4gICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjb250YWluZXIke251bX1gKTtcbiAgICBsZXQgcm93MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzEuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cxJyk7XG4gICAgbGV0IHJvdzIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cyLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MicpO1xuICAgIGxldCByb3czID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93My5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzMnKTtcbiAgICBsZXQgcm93NCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzQuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c0Jyk7XG4gICAgbGV0IHJvdzUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c1LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NScpO1xuICAgIGxldCByb3c2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Ni5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzYnKTtcbiAgICBsZXQgcm93NyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzcuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c3Jyk7XG4gICAgbGV0IHJvdzggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c4LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93OCcpO1xuICAgIGxldCByb3c5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93OS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzknKTtcbiAgICBsZXQgcm93MTAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cxMC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzEwJyk7XG5cbiAgICBnYW1lQm9hcmQuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICBpdGVtLmZvckVhY2goZnVuY3Rpb24oc3ViaXRlbSwgc3ViaW5kZXgpIHtcbiAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2lkJywgYHNxdWFyZURpdiR7aW5kZXh9JHtzdWJpbmRleH1gKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcsIGluZGV4KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcsIHN1YmluZGV4KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzLXNoaXAnLCBzdWJpdGVtLmhhc1NoaXApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1pcy1zaG90Jywgc3ViaXRlbS5pc1Nob3QpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LmNsYXNzTGlzdC5hZGQoYGF0a0RpdiR7bnVtfWApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnRleHRDb250ZW50ID0gc3ViaXRlbS5oYXNTaGlwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93MS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MiR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93My5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2MyR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93NC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93NS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Ni5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NiR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93Ny5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2NyR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93OC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2OCR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93OS5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlRGl2LmdldEF0dHJpYnV0ZSgnaWQnKSA9PSBgc3F1YXJlRGl2OSR7aX1gKXtcbiAgICAgICAgICAgICAgICAgICAgcm93MTAuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93MSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Mik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Myk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93NCk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93NSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Nik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93Nyk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93OCk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93OSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93MTApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGF0a0xpc3RlbmVyID0gKHBsYXllciwgZW5lbXksIG51bSkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBwbGF5ZXIuYm9hcmQ7XG4gICAgbGV0IHNoaXBzID0gcGxheWVyLnNoaXBzO1xuICAgIGxldCByZXNwb25zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYGF0a0RpdiR7bnVtfWApO1xuICAgIGxldCBpc1Nob3Q7XG4gICAgbGV0IHlQb2ludDtcbiAgICBsZXQgeFBvaW50O1xuICAgIGxldCBzaGlwTGVuZ3RoO1xuICAgIGxldCBzaGlwVHlwZTtcbiAgICBsZXQgcG9zNSA9IDA7XG4gICAgbGV0IHBvczQgPSAwO1xuICAgIGxldCBwb3MzID0gMDtcbiAgICBsZXQgcG9zMiA9IDA7XG4gICAgbGV0IHBvczEgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHBsYXllci5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHlQb2ludCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJyk7XG4gICAgICAgICAgICAgICAgeFBvaW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKTtcbiAgICAgICAgICAgICAgICBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5pc1Nob3Q7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXNTaG90KTtcbiAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0uc2hpcExlbmd0aDtcbiAgICAgICAgICAgICAgICBzaGlwVHlwZSA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLnNoaXBUeXBlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzU2hvdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1oYXMtc2hpcCcpID09PSAndHJ1ZScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JleSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soeFBvaW50LCB5UG9pbnQpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBUeXBlID09ICdDYXJyaWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M1ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnRGVzdHJveWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgcG9zMyArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdTdWJtYXJpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzFdLmhpdChwb3MyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczIgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnUGF0cm9sYm9hdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zMSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZW5lbXkudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuXG5leHBvcnQgeyBcblxuICAgIHJlbmRlckdCb2FyZCxcbiAgICBhdGtMaXN0ZW5lcixcbiB9OyIsImltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vcGxheWVyRmFjdG9yeSc7XG5pbXBvcnQgeyByZW5kZXJHQm9hcmQsIGF0a0xpc3RlbmVyIH0gZnJvbSAnLi9yZW5kZXInO1xuXG5jb25zdCBnYW1lID0gKCkgPT4ge1xuXG4gICAgLy9jcmVhdGUgcGxheWVyIGFuZCBjb21wdXRlciBwbGF5ZXJcbiAgICAvL3BvcHVsYXRlIGdhbWVib2FyZHMgZm9yIGJvdGggcGxheWVyc1xuXG4gICAgY29uc3QgcGxheWVyQXJyID0gW1xuICAgICAgICBQbGF5ZXIoXCJwbGF5ZXIxXCIsIHRydWUpLFxuICAgICAgICBQbGF5ZXIoXCJjb21wdXRlclwiLCBmYWxzZSlcbiAgICBdO1xuXG4gICAgcGxheWVyQXJyWzBdLmJvYXJkLnBsYWNlU2hpcCgyLCAyLCA1LCAnQ2FycmllcicpO1xuICAgIHBsYXllckFyclswXS5ib2FyZC5wbGFjZVNoaXAoOCwgMCwgNCwgJ0JhdHRsZXNoaXAnKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDYsIDcsIDMsICdEZXN0cm95ZXInKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDUsIDEsIDMsICdTdWJtYXJpbmUnKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDEsIDcsIDIsICdQYXRyb2xib2F0Jyk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCk7XG4gICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQsIDEpO1xuXG4gICAgcGxheWVyQXJyWzFdLmJvYXJkLnBsYWNlU2hpcCg4LCAxLCA1LCAnQ2FycmllcicpO1xuICAgIHBsYXllckFyclsxXS5ib2FyZC5wbGFjZVNoaXAoMywgNSwgNCwgJ0JhdHRsZXNoaXAnKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDYsIDMsIDMsICdEZXN0cm95ZXInKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDEsIDEsIDMsICdTdWJtYXJpbmUnKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDAsIDYsIDIsICdQYXRyb2xib2F0Jyk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQXJyWzFdLmJvYXJkLmdhbWVCb2FyZCk7XG4gICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclsxXS5ib2FyZC5nYW1lQm9hcmQsIDIpO1xuXG4gICAgYXRrTGlzdGVuZXIocGxheWVyQXJyWzBdLCBwbGF5ZXJBcnJbMV0sIDEpO1xuICAgIGF0a0xpc3RlbmVyKHBsYXllckFyclsxXSwgcGxheWVyQXJyWzBdLCAyKTtcblxuICAgIC8vTmVlZCB0byBpbXBsZW1lbnQgbG9naWMgd2hpY2ggZG9lc24ndCBhbGxvdyBhIHBsYXllciB0byByZXNlbGVjdCBhIHNxdWFyZSB0aGV5IGhhdmUgYWxyZWFkeSBjbGlja2VkIG9uXG5cbn07XG5cbmV4cG9ydCB7IGdhbWUgfTsiLCJpbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9nYW1lJztcblxuZ2FtZSgpOyJdLCJuYW1lcyI6WyJzaGlwRmFjdG9yeSIsImxlbmd0aCIsInNoaXAiLCJoaXQiLCJwb3MiLCJpc1N1bmsiLCJjb3VudCIsInN1bmsiLCJmb3JFYWNoIiwiaXRlbSIsIlBsYXllciIsIm5hbWUiLCJpc0FjdGl2ZSIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sQm9hdCIsInN0YXRlIiwidG9nZ2xlIiwiYm9hcmQiLCJnYW1lQm9hcmQiLCJpIiwiaiIsImhhc1NoaXAiLCJpc1Nob3QiLCJzaGlwTGVuZ3RoIiwic2hpcFR5cGUiLCJ4UG9pbnQiLCJ5UG9pbnQiLCJwbGFjZVNoaXAiLCJ4IiwieSIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJhcnIiLCJmaWx0ZXIiLCJzaGlwcyIsImdhbWVCb2FyZEZhY3RvcnkiLCJyZW5kZXJHQm9hcmQiLCJudW0iLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3cxIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJvdzIiLCJyb3czIiwicm93NCIsInJvdzUiLCJyb3c2Iiwicm93NyIsInJvdzgiLCJyb3c5Iiwicm93MTAiLCJpbmRleCIsInN1Yml0ZW0iLCJzdWJpbmRleCIsInNxdWFyZURpdiIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJhdGtMaXN0ZW5lciIsInBsYXllciIsImVuZW15IiwicmVzcG9uc2UiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicG9zNSIsInBvczQiLCJwb3MzIiwicG9zMiIsInBvczEiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImNvbnNvbGUiLCJsb2ciLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBsYXllckFyciIsImdhbWUiXSwic291cmNlUm9vdCI6IiJ9