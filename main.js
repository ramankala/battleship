(()=>{"use strict";const e=e=>{const t=[];return{ship:t,length:e,hit:e=>t[e]="hit",isSunk:()=>{let i=0,r=!1;return t.forEach((function(e){"hit"===e&&(i+=1)})),r=i===e,r}}},t=(t,i=!1)=>{let r=e(5),a=e(4),o=e(3),l=e(3),d=e(2),n={name:t,isActive:i};return{get name(){return n.name},get isActive(){return n.isActive},toggle(){n.isActive=!n.isActive},board:(()=>{let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let t=0;t<10;t++)for(let i=0;i<10;i++)e[t][i]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:e,placeShip:(t,i,r,a)=>{for(let o=0;o<r;o++)e[t][i].hasShip=!0,e[t][i].shipLength=r,e[t][i].shipType=a,e[t][i].xPoint=t,e[t][i].yPoint=i,i+=1;return e},receiveAttack:(t,i)=>!0===e[t][i].hasShip?(e[t][i].isShot=!0,"Hit"):(e[t][i].isShot=!0,e),allShipsSunk:e=>e.filter((e=>e.isSunk())).length===e.length}})(),ships:[r,a,o,l,d],enemyMove:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}},i=(e,t)=>{let i=document.querySelector(`#container${t}`),r=document.createElement("div");r.setAttribute("id","row1");let a=document.createElement("div");a.setAttribute("id","row2");let o=document.createElement("div");o.setAttribute("id","row3");let l=document.createElement("div");l.setAttribute("id","row4");let d=document.createElement("div");d.setAttribute("id","row5");let n=document.createElement("div");n.setAttribute("id","row6");let h=document.createElement("div");h.setAttribute("id","row7");let s=document.createElement("div");s.setAttribute("id","row8");let p=document.createElement("div");p.setAttribute("id","row9");let c=document.createElement("div");c.setAttribute("id","row10"),e.forEach((function(e,u){e.forEach((function(e,g){let b=document.createElement("div");b.setAttribute("id",`squareDiv${u}${g}`),b.setAttribute("data-y-coord",u),b.setAttribute("data-x-coord",g),b.setAttribute("data-has-ship",e.hasShip),b.setAttribute("data-is-shot",e.isShot),b.classList.add(`atkDiv${t}`),b.textContent=e.hasShip;for(let e=0;e<10;e++)b.getAttribute("id")==`squareDiv0${e}`?r.appendChild(b):b.getAttribute("id")==`squareDiv1${e}`?a.appendChild(b):b.getAttribute("id")==`squareDiv2${e}`?o.appendChild(b):b.getAttribute("id")==`squareDiv3${e}`?l.appendChild(b):b.getAttribute("id")==`squareDiv4${e}`?d.appendChild(b):b.getAttribute("id")==`squareDiv5${e}`?n.appendChild(b):b.getAttribute("id")==`squareDiv6${e}`?h.appendChild(b):b.getAttribute("id")==`squareDiv7${e}`?s.appendChild(b):b.getAttribute("id")==`squareDiv8${e}`?p.appendChild(b):b.getAttribute("id")==`squareDiv9${e}`&&c.appendChild(b);i.appendChild(r),i.appendChild(a),i.appendChild(o),i.appendChild(l),i.appendChild(d),i.appendChild(n),i.appendChild(h),i.appendChild(s),i.appendChild(p),i.appendChild(c)}))}))},r=(e,t,i,a)=>{let o=e.board;console.log(o);let l,d=e.ships,n=o.gameBoard[i][a].isShot,h=o.gameBoard[i][a].hasShip,s=o.gameBoard[i][a].shipLength,p=o.gameBoard[i][a].shipType;l=0===i?a:""+i+a;let c=document.getElementsByClassName("atkDiv1")[l],u=0,g=0,b=0,m=0,v=0;if(!0===t.isActive)if(!1===n)c.style.backgroundColor=!0===h?"red":"grey",o.receiveAttack(i,a),"Carrier"==p?(d.filter((e=>e.length==s))[0].hit(u),u+=1):"Battleship"==p?(d.filter((e=>e.length==s))[0].hit(g),g+=1):"Destroyer"==p?(d.filter((e=>e.length==s))[0].hit(b),b+=1):"Submarine"==p?(d.filter((e=>e.length==s))[1].hit(m),m+=1):"Patrolboat"==p&&(d.filter((e=>e.length==s))[0].hit(v),v+=1),e.toggle(),t.toggle(),console.log(t);else{let i=e.enemyMove();console.log(i),r(e,t,i[0],i[1])}};(()=>{const e=[t("player1",!0),t("computer",!1)];e[0].board.placeShip(2,2,5,"Carrier"),e[0].board.placeShip(8,0,4,"Battleship"),e[0].board.placeShip(6,7,3,"Destroyer"),e[0].board.placeShip(5,1,3,"Submarine"),e[0].board.placeShip(1,7,2,"Patrolboat"),console.log(e[0].board.gameBoard),i(e[0].board.gameBoard,1),e[1].board.placeShip(8,1,5,"Carrier"),e[1].board.placeShip(3,5,4,"Battleship"),e[1].board.placeShip(6,3,3,"Destroyer"),e[1].board.placeShip(1,1,3,"Submarine"),e[1].board.placeShip(0,6,2,"Patrolboat"),console.log(e[1].board.gameBoard),i(e[1].board.gameBoard,2),((e,t,i)=>{let a,o,l,d,n,h=t.board,s=t.ships,p=document.getElementsByClassName("atkDiv2"),c=0,u=0,g=0,b=0,m=0;for(let i=0;i<p.length;i++)p[i].addEventListener("click",(function(i){if(!0===e.isActive)if(o=i.target.getAttribute("data-y-coord"),l=i.target.getAttribute("data-x-coord"),a=h.gameBoard[l][o].isShot,d=h.gameBoard[l][o].shipLength,n=h.gameBoard[l][o].shipType,!1===a){"true"===i.target.getAttribute("data-has-ship")?(i.target.style.backgroundColor="red",console.log("just checking this works")):i.target.style.backgroundColor="grey",console.log(l),console.log(o),h.receiveAttack(l,o),"Carrier"==n?(s.filter((e=>e.length==d))[0].hit(c),c+=1):"Battleship"==n?(s.filter((e=>e.length==d))[0].hit(u),u+=1):"Destroyer"==n?(s.filter((e=>e.length==d))[0].hit(g),g+=1):"Submarine"==n?(s.filter((e=>e.length==d))[1].hit(b),b+=1):"Patrolboat"==n&&(s.filter((e=>e.length==d))[0].hit(m),m+=1),e.toggle(),t.toggle();let a=e.enemyMove();console.log(a),r(e,t,a[0],a[1])}else console.log(a)}))})(e[0],e[1])})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBRUEsTUNETUEsRUFBZUMsSUFDakIsTUFBTUMsRUFBTyxHQXNCYixNQUFPLENBQ0hBLEtBQUFBLEVBQ0FELE9BQUFBLEVBQ0FFLElBdkJTQyxHQUFRRixFQUFLRSxHQUFPLE1Bd0I3QkMsT0F0QlcsS0FDWCxJQUFJQyxFQUFRLEVBQ1JDLEdBQU8sRUFhWCxPQVhBTCxFQUFLTSxTQUFRLFNBQVNDLEdBQ0wsUUFBVEEsSUFDQUgsR0FBUyxNQUliQyxFQURBRCxJQUFVTCxFQU1QTSxLQ2xCVEcsRUFBUyxDQUFDQyxFQUFNQyxHQUFXLEtBRTdCLElBQUlDLEVBQVViLEVBQVksR0FDdEJjLEVBQWFkLEVBQVksR0FDekJlLEVBQVlmLEVBQVksR0FDeEJnQixFQUFZaEIsRUFBWSxHQUN4QmlCLEVBQWFqQixFQUFZLEdBRXpCa0IsRUFBUSxDQUNSUCxLQUFBQSxFQUNBQyxTQUFBQSxHQWNKLE1BQU8sQ0FDQ0QsV0FBTyxPQUFPTyxFQUFNUCxNQUNwQkMsZUFBVyxPQUFPTSxFQUFNTixVQUM1Qk8sU0FBVUQsRUFBTU4sVUFBWU0sRUFBTU4sVUFDbENRLE1GN0JpQixNQUNyQixJQUFJQyxFQUFZLENBQ1osQ0FBRSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUN0QyxDQUFFLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQ3RDLENBQUUsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFDdEMsQ0FBRSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUN0QyxDQUFFLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQ3RDLENBQUUsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFDdEMsQ0FBRSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUN0QyxDQUFFLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQ3RDLENBQUUsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFDdEMsQ0FBRSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxLQUUxQyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNwQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNwQkYsRUFBVUMsR0FBR0MsR0FBSyxDQUFFQyxTQUFTLEVBQU9DLFFBQVEsRUFBT0MsV0FBWSxFQUFHQyxTQUFVLE1BQU9DLE9BQVEsRUFBR0MsT0FBUSxHQXFDOUcsTUFBTyxDQUNIUixVQUFBQSxFQUNBUyxVQWxDYyxDQUFDQyxFQUFHQyxFQUFHTixFQUFZQyxLQUNqQyxJQUFLLElBQUlMLEVBQUksRUFBR0EsRUFBSUksRUFBWUosSUFDNUJELEVBQVVVLEdBQUdDLEdBQUdSLFNBQVUsRUFDMUJILEVBQVVVLEdBQUdDLEdBQUdOLFdBQWFBLEVBQzdCTCxFQUFVVSxHQUFHQyxHQUFHTCxTQUFXQSxFQUMzQk4sRUFBVVUsR0FBR0MsR0FBR0osT0FBU0csRUFDekJWLEVBQVVVLEdBQUdDLEdBQUdILE9BQVNHLEVBQ3pCQSxHQUFLLEVBRVQsT0FBT1gsR0EwQlBZLGNBdkJrQixDQUFDRixFQUFHQyxLQUNVLElBQTVCWCxFQUFVVSxHQUFHQyxHQUFHUixTQUNoQkgsRUFBVVUsR0FBR0MsR0FBR1AsUUFBUyxFQUNsQixRQUVQSixFQUFVVSxHQUFHQyxHQUFHUCxRQUFTLEVBQ2xCSixHQWtCWGEsYUFka0JDLEdBQ0VBLEVBQUlDLFFBQU9DLEdBQVNBLEVBQU1oQyxXQUM5QkosU0FBV2tDLEVBQUlsQyxTRTlCdkJxQyxHQWdCUkQsTUFkUSxDQUFDeEIsRUFBU0MsRUFBWUMsRUFBV0MsRUFBV0MsR0FlcERzQixVQWJjLElBSVAsQ0FIQ0MsS0FBS0MsTUFBdUIsR0FBaEJELEtBQUtFLFVBQ2pCRixLQUFLQyxNQUF1QixHQUFoQkQsS0FBS0UsYUN0QjNCQyxFQUFlLENBQUN0QixFQUFXdUIsS0FDN0IsSUFBSUMsRUFBWUMsU0FBU0MsY0FBYyxhQUFhSCxLQUNoREksRUFBT0YsU0FBU0csY0FBYyxPQUNsQ0QsRUFBS0UsYUFBYSxLQUFNLFFBQ3hCLElBQUlDLEVBQU9MLFNBQVNHLGNBQWMsT0FDbENFLEVBQUtELGFBQWEsS0FBTSxRQUN4QixJQUFJRSxFQUFPTixTQUFTRyxjQUFjLE9BQ2xDRyxFQUFLRixhQUFhLEtBQU0sUUFDeEIsSUFBSUcsRUFBT1AsU0FBU0csY0FBYyxPQUNsQ0ksRUFBS0gsYUFBYSxLQUFNLFFBQ3hCLElBQUlJLEVBQU9SLFNBQVNHLGNBQWMsT0FDbENLLEVBQUtKLGFBQWEsS0FBTSxRQUN4QixJQUFJSyxFQUFPVCxTQUFTRyxjQUFjLE9BQ2xDTSxFQUFLTCxhQUFhLEtBQU0sUUFDeEIsSUFBSU0sRUFBT1YsU0FBU0csY0FBYyxPQUNsQ08sRUFBS04sYUFBYSxLQUFNLFFBQ3hCLElBQUlPLEVBQU9YLFNBQVNHLGNBQWMsT0FDbENRLEVBQUtQLGFBQWEsS0FBTSxRQUN4QixJQUFJUSxFQUFPWixTQUFTRyxjQUFjLE9BQ2xDUyxFQUFLUixhQUFhLEtBQU0sUUFDeEIsSUFBSVMsRUFBUWIsU0FBU0csY0FBYyxPQUNuQ1UsRUFBTVQsYUFBYSxLQUFNLFNBRXpCN0IsRUFBVWIsU0FBUSxTQUFTQyxFQUFNbUQsR0FDN0JuRCxFQUFLRCxTQUFRLFNBQVNxRCxFQUFTQyxHQUMzQixJQUFJQyxFQUFZakIsU0FBU0csY0FBYyxPQUN2Q2MsRUFBVWIsYUFBYSxLQUFNLFlBQVlVLElBQVFFLEtBQ2pEQyxFQUFVYixhQUFhLGVBQWdCVSxHQUN2Q0csRUFBVWIsYUFBYSxlQUFnQlksR0FDdkNDLEVBQVViLGFBQWEsZ0JBQWlCVyxFQUFRckMsU0FDaER1QyxFQUFVYixhQUFhLGVBQWdCVyxFQUFRcEMsUUFDL0NzQyxFQUFVQyxVQUFVQyxJQUFJLFNBQVNyQixLQUNqQ21CLEVBQVVHLFlBQWNMLEVBQVFyQyxRQUNoQyxJQUFLLElBQUlGLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNoQnlDLEVBQVVJLGFBQWEsT0FBUyxhQUFhN0MsSUFDN0MwQixFQUFLb0IsWUFBWUwsR0FDVkEsRUFBVUksYUFBYSxPQUFTLGFBQWE3QyxJQUNwRDZCLEVBQUtpQixZQUFZTCxHQUNWQSxFQUFVSSxhQUFhLE9BQVMsYUFBYTdDLElBQ3BEOEIsRUFBS2dCLFlBQVlMLEdBQ1ZBLEVBQVVJLGFBQWEsT0FBUyxhQUFhN0MsSUFDcEQrQixFQUFLZSxZQUFZTCxHQUNWQSxFQUFVSSxhQUFhLE9BQVMsYUFBYTdDLElBQ3BEZ0MsRUFBS2MsWUFBWUwsR0FDVkEsRUFBVUksYUFBYSxPQUFTLGFBQWE3QyxJQUNwRGlDLEVBQUthLFlBQVlMLEdBQ1ZBLEVBQVVJLGFBQWEsT0FBUyxhQUFhN0MsSUFDcERrQyxFQUFLWSxZQUFZTCxHQUNWQSxFQUFVSSxhQUFhLE9BQVMsYUFBYTdDLElBQ3BEbUMsRUFBS1csWUFBWUwsR0FDVkEsRUFBVUksYUFBYSxPQUFTLGFBQWE3QyxJQUNwRG9DLEVBQUtVLFlBQVlMLEdBQ1ZBLEVBQVVJLGFBQWEsT0FBUyxhQUFhN0MsS0FDcERxQyxFQUFNUyxZQUFZTCxHQUkxQmxCLEVBQVV1QixZQUFZcEIsR0FDdEJILEVBQVV1QixZQUFZakIsR0FDdEJOLEVBQVV1QixZQUFZaEIsR0FDdEJQLEVBQVV1QixZQUFZZixHQUN0QlIsRUFBVXVCLFlBQVlkLEdBQ3RCVCxFQUFVdUIsWUFBWWIsR0FDdEJWLEVBQVV1QixZQUFZWixHQUN0QlgsRUFBVXVCLFlBQVlYLEdBQ3RCWixFQUFVdUIsWUFBWVYsR0FDdEJiLEVBQVV1QixZQUFZVCxVQW1GNUJVLEVBQWMsQ0FBQ0MsRUFBUUMsRUFBT3hDLEVBQUdDLEtBQ25DLElBQUlYLEVBQVlpRCxFQUFPbEQsTUFDdkJvRCxRQUFRQyxJQUFJcEQsR0FDWixJQUtJcUQsRUFMQXJDLEVBQVFpQyxFQUFPakMsTUFDZlosRUFBU0osRUFBVUEsVUFBVVUsR0FBR0MsR0FBR1AsT0FDbkNELEVBQVVILEVBQVVBLFVBQVVVLEdBQUdDLEdBQUdSLFFBQ3BDRSxFQUFhTCxFQUFVQSxVQUFVVSxHQUFHQyxHQUFHTixXQUN2Q0MsRUFBV04sRUFBVUEsVUFBVVUsR0FBR0MsR0FBR0wsU0FHckMrQyxFQURNLElBQU4zQyxFQUNRQyxFQUVBLEdBQUtELEVBQUlDLEVBRXJCLElBQUkrQixFQUFZakIsU0FBUzZCLHVCQUF1QixXQUFXRCxHQUN2REUsRUFBTyxFQUNQQyxFQUFPLEVBQ1BDLEVBQU8sRUFDUEMsRUFBTyxFQUNQQyxFQUFPLEVBRVgsSUFBdUIsSUFBbkJULEVBQU0zRCxTQUVOLElBQWUsSUFBWGEsRUFFSXNDLEVBQVVrQixNQUFNQyxpQkFESixJQUFaMUQsRUFDa0MsTUFFQSxPQUV0Q0gsRUFBVVksY0FBY0YsRUFBR0MsR0FFWCxXQUFaTCxHQUVjVSxFQUFNRCxRQUFPbEMsR0FBUUEsRUFBS0QsUUFBVXlCLElBQzFDLEdBQUd2QixJQUFJeUUsR0FDZkEsR0FBUSxHQUNXLGNBQVpqRCxHQUVPVSxFQUFNRCxRQUFPbEMsR0FBUUEsRUFBS0QsUUFBVXlCLElBQzFDLEdBQUd2QixJQUFJMEUsR0FDZkEsR0FBUSxHQUNXLGFBQVpsRCxHQUVPVSxFQUFNRCxRQUFPbEMsR0FBUUEsRUFBS0QsUUFBVXlCLElBQzFDLEdBQUd2QixJQUFJMkUsR0FDWEEsR0FBUSxHQUNPLGFBQVpuRCxHQUVPVSxFQUFNRCxRQUFPbEMsR0FBUUEsRUFBS0QsUUFBVXlCLElBQzFDLEdBQUd2QixJQUFJNEUsR0FDZkEsR0FBUSxHQUNXLGNBQVpwRCxJQUVPVSxFQUFNRCxRQUFPbEMsR0FBUUEsRUFBS0QsUUFBVXlCLElBQzFDLEdBQUd2QixJQUFJNkUsR0FDZkEsR0FBUSxHQUVaVixFQUFPbkQsU0FDUG9ELEVBQU1wRCxTQUNOcUQsUUFBUUMsSUFBSUYsT0FDVCxDQUNILElBQUlZLEVBQWNiLEVBQU8vQixZQUN6QmlDLFFBQVFDLElBQUlVLEdBQ1pkLEVBQVlDLEVBQVFDLEVBQU9ZLEVBQVksR0FBSUEsRUFBWSxNQ2pOdEQsTUFLVCxNQUFNQyxFQUFZLENBQ2QxRSxFQUFPLFdBQVcsR0FDbEJBLEVBQU8sWUFBWSxJQUd2QjBFLEVBQVUsR0FBR2hFLE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsV0FDdENzRCxFQUFVLEdBQUdoRSxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGNBQ3RDc0QsRUFBVSxHQUFHaEUsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxhQUN0Q3NELEVBQVUsR0FBR2hFLE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsYUFDdENzRCxFQUFVLEdBQUdoRSxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGNBQ3RDMEMsUUFBUUMsSUFBSVcsRUFBVSxHQUFHaEUsTUFBTUMsV0FDL0JzQixFQUFheUMsRUFBVSxHQUFHaEUsTUFBTUMsVUFBVyxHQUUzQytELEVBQVUsR0FBR2hFLE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsV0FDdENzRCxFQUFVLEdBQUdoRSxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGNBQ3RDc0QsRUFBVSxHQUFHaEUsTUFBTVUsVUFBVSxFQUFHLEVBQUcsRUFBRyxhQUN0Q3NELEVBQVUsR0FBR2hFLE1BQU1VLFVBQVUsRUFBRyxFQUFHLEVBQUcsYUFDdENzRCxFQUFVLEdBQUdoRSxNQUFNVSxVQUFVLEVBQUcsRUFBRyxFQUFHLGNBQ3RDMEMsUUFBUUMsSUFBSVcsRUFBVSxHQUFHaEUsTUFBTUMsV0FDL0JzQixFQUFheUMsRUFBVSxHQUFHaEUsTUFBTUMsVUFBVyxHRDRDM0IsRUFBQ2lELEVBQVFDLEVBQU8zQixLQUNoQyxJQUdJbkIsRUFDQUksRUFDQUQsRUFDQUYsRUFDQUMsRUFQQU4sRUFBWWtELEVBQU1uRCxNQUNsQmlCLEVBQVFrQyxFQUFNbEMsTUFDZGdELEVBQVd2QyxTQUFTNkIsdUJBQXVCLFdBTTNDQyxFQUFPLEVBQ1BDLEVBQU8sRUFDUEMsRUFBTyxFQUNQQyxFQUFPLEVBQ1BDLEVBQU8sRUFFWCxJQUFLLElBQUkxRCxFQUFJLEVBQUdBLEVBQUkrRCxFQUFTcEYsT0FBUXFCLElBQ2pDK0QsRUFBUy9ELEdBQUdnRSxpQkFBaUIsU0FBUyxTQUFTQyxHQUMzQyxJQUF3QixJQUFwQmpCLEVBQU8xRCxTQU9QLEdBTkFpQixFQUFTMEQsRUFBRUMsT0FBT3JCLGFBQWEsZ0JBQy9CdkMsRUFBUzJELEVBQUVDLE9BQU9yQixhQUFhLGdCQUMvQjFDLEVBQVNKLEVBQVVBLFVBQVVPLEdBQVFDLEdBQVFKLE9BQzdDQyxFQUFhTCxFQUFVQSxVQUFVTyxHQUFRQyxHQUFRSCxXQUNqREMsRUFBV04sRUFBVUEsVUFBVU8sR0FBUUMsR0FBUUYsVUFFaEMsSUFBWEYsRUFBa0IsQ0FDNkIsU0FBM0M4RCxFQUFFQyxPQUFPckIsYUFBYSxrQkFDdEJvQixFQUFFQyxPQUFPUCxNQUFNQyxnQkFBa0IsTUFDakNWLFFBQVFDLElBQUksNkJBRVpjLEVBQUVDLE9BQU9QLE1BQU1DLGdCQUFrQixPQUVyQ1YsUUFBUUMsSUFBSTdDLEdBQ1o0QyxRQUFRQyxJQUFJNUMsR0FDWlIsRUFBVVksY0FBY0wsRUFBUUMsR0FFaEIsV0FBWkYsR0FFY1UsRUFBTUQsUUFBT2xDLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSXlFLEdBQ2ZBLEdBQVEsR0FDVyxjQUFaakQsR0FFT1UsRUFBTUQsUUFBT2xDLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTBFLEdBQ2ZBLEdBQVEsR0FDVyxhQUFabEQsR0FFT1UsRUFBTUQsUUFBT2xDLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTJFLEdBQ2RBLEdBQVEsR0FDVSxhQUFabkQsR0FFT1UsRUFBTUQsUUFBT2xDLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTRFLEdBQ2ZBLEdBQVEsR0FDVyxjQUFacEQsSUFFT1UsRUFBTUQsUUFBT2xDLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTZFLEdBQ2ZBLEdBQVEsR0FFWlYsRUFBT25ELFNBQ1BvRCxFQUFNcEQsU0FDTixJQUFJZ0UsRUFBY2IsRUFBTy9CLFlBQ3pCaUMsUUFBUUMsSUFBSVUsR0FDWmQsRUFBWUMsRUFBUUMsRUFBT1ksRUFBWSxHQUFJQSxFQUFZLFNBSXZEWCxRQUFRQyxJQUFJaEQsT0MvRzVCZ0UsQ0FBWUwsRUFBVSxHQUFJQSxFQUFVLEtDM0J4Q00sSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaGlwRmFjdG9yeSB9IGZyb20gJy4vc2hpcEZhY3RvcnknO1xuXG5jb25zdCBnYW1lQm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBbXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9ICh7aGFzU2hpcDogZmFsc2UsIGlzU2hvdDogZmFsc2UsIHNoaXBMZW5ndGg6IDAsIHNoaXBUeXBlOiAnbi9hJywgeFBvaW50OiAwLCB5UG9pbnQ6IDB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoeCwgeSwgc2hpcExlbmd0aCwgc2hpcFR5cGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGggPSBzaGlwTGVuZ3RoO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlID0gc2hpcFR5cGU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueFBvaW50ID0geDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS55UG9pbnQgPSB5O1xuICAgICAgICAgICAgeSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaXNTaG90ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAnSGl0JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5pc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBhbGxTaGlwc1N1bmsgPSAoYXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1bmtlblNoaXBzID0gYXJyLmZpbHRlcihzaGlwcyA9PiBzaGlwcy5pc1N1bmsoKSk7XG4gICAgICAgIGlmIChzdW5rZW5TaGlwcy5sZW5ndGggPT09IGFyci5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdhbWVCb2FyZCxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBhbGxTaGlwc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgZ2FtZUJvYXJkRmFjdG9yeSB9OyIsIlxuY29uc3Qgc2hpcEZhY3RvcnkgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFtdO1xuXG4gICAgY29uc3QgaGl0ID0gKHBvcykgPT4gc2hpcFtwb3NdID0gJ2hpdCc7XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGxldCBzdW5rID0gZmFsc2U7XG5cbiAgICAgICAgc2hpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICdoaXQnKXtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvdW50ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN1bmsgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VuayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1bms7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNoaXAsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgaGl0LFxuICAgICAgICBpc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgc2hpcEZhY3RvcnkgfTsiLCJpbXBvcnQgeyBnYW1lQm9hcmRGYWN0b3J5IH0gZnJvbSAnLi9nYW1lQm9hcmRGYWN0b3J5JztcbmltcG9ydCB7IHNoaXBGYWN0b3J5IH0gZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmNvbnN0IFBsYXllciA9IChuYW1lLCBpc0FjdGl2ZSA9IGZhbHNlKSA9PiB7XG5cbiAgICBsZXQgY2FycmllciA9IHNoaXBGYWN0b3J5KDUpO1xuICAgIGxldCBiYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoNCk7XG4gICAgbGV0IGRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KDMpO1xuICAgIGxldCBzdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgzKTtcbiAgICBsZXQgcGF0cm9sQm9hdCA9IHNoaXBGYWN0b3J5KDIpO1xuICAgIFxuICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaXNBY3RpdmUsXG4gICAgfVxuXG4gICAgbGV0IGJvYXJkID0gZ2FtZUJvYXJkRmFjdG9yeSgpO1xuXG4gICAgbGV0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGRlc3Ryb3llciwgc3VibWFyaW5lLCBwYXRyb2xCb2F0XTtcblxuICAgIGNvbnN0IGVuZW15TW92ZSA9ICgpID0+IHtcbiAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcblxuICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBuYW1lKCl7cmV0dXJuIHN0YXRlLm5hbWU7fSxcbiAgICAgICAgZ2V0IGlzQWN0aXZlKCl7cmV0dXJuIHN0YXRlLmlzQWN0aXZlO30sXG4gICAgICAgIHRvZ2dsZSgpeyBzdGF0ZS5pc0FjdGl2ZSA9ICFzdGF0ZS5pc0FjdGl2ZTt9LFxuICAgICAgICBib2FyZCxcbiAgICAgICAgc2hpcHMsXG4gICAgICAgIGVuZW15TW92ZSxcbiAgICB9XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTsiLCJjb25zdCByZW5kZXJHQm9hcmQgPSAoZ2FtZUJvYXJkLCBudW0pID0+IHtcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NvbnRhaW5lciR7bnVtfWApO1xuICAgIGxldCByb3cxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzEnKTtcbiAgICBsZXQgcm93MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzIuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cyJyk7XG4gICAgbGV0IHJvdzMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3czLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MycpO1xuICAgIGxldCByb3c0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93NC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzQnKTtcbiAgICBsZXQgcm93NSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzUuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c1Jyk7XG4gICAgbGV0IHJvdzYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c2LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NicpO1xuICAgIGxldCByb3c3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Ny5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzcnKTtcbiAgICBsZXQgcm93OCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzguc2V0QXR0cmlidXRlKCdpZCcsICdyb3c4Jyk7XG4gICAgbGV0IHJvdzkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c5LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93OScpO1xuICAgIGxldCByb3cxMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzEwLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MTAnKTtcblxuICAgIGdhbWVCb2FyZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGl0ZW0uZm9yRWFjaChmdW5jdGlvbihzdWJpdGVtLCBzdWJpbmRleCkge1xuICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnaWQnLCBgc3F1YXJlRGl2JHtpbmRleH0ke3N1YmluZGV4fWApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJywgaW5kZXgpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS14LWNvb3JkJywgc3ViaW5kZXgpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1oYXMtc2hpcCcsIHN1Yml0ZW0uaGFzU2hpcCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLWlzLXNob3QnLCBzdWJpdGVtLmlzU2hvdCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuY2xhc3NMaXN0LmFkZChgYXRrRGl2JHtudW19YCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYudGV4dENvbnRlbnQgPSBzdWJpdGVtLmhhc1NoaXA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYwJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cxLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYxJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cyLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYyJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3czLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYzJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c0LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY0JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c1LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY1JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c2LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY2JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c3LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY3JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c4LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY4JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c5LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY5JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cxMC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cxKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cyKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3czKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c0KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c1KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c2KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c3KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c4KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c5KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cxMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgYXRrTGlzdGVuZXIgPSAocGxheWVyLCBlbmVteSwgbnVtKSA9PiB7XG4gICAgbGV0IGdhbWVCb2FyZCA9IGVuZW15LmJvYXJkO1xuICAgIGxldCBzaGlwcyA9IGVuZW15LnNoaXBzO1xuICAgIGxldCByZXNwb25zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYGF0a0RpdiR7bnVtfWApO1xuICAgIGxldCBpc1Nob3Q7XG4gICAgbGV0IHlQb2ludDtcbiAgICBsZXQgeFBvaW50O1xuICAgIGxldCBzaGlwTGVuZ3RoO1xuICAgIGxldCBzaGlwVHlwZTtcbiAgICBsZXQgcG9zNSA9IDA7XG4gICAgbGV0IHBvczQgPSAwO1xuICAgIGxldCBwb3MzID0gMDtcbiAgICBsZXQgcG9zMiA9IDA7XG4gICAgbGV0IHBvczEgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHBsYXllci5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHlQb2ludCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJyk7XG4gICAgICAgICAgICAgICAgeFBvaW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKTtcbiAgICAgICAgICAgICAgICBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5pc1Nob3Q7XG4gICAgICAgICAgICAgICAgc2hpcExlbmd0aCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLnNoaXBMZW5ndGg7XG4gICAgICAgICAgICAgICAgc2hpcFR5cGUgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5zaGlwVHlwZTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1Nob3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzLXNoaXAnKSA9PT0gJ3RydWUnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2p1c3QgY2hlY2tpbmcgdGhpcyB3b3JrcycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZXknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHlQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKHhQb2ludCwgeVBvaW50KTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwVHlwZSA9PSAnQ2FycmllcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zNSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHBvczMgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnU3VibWFyaW5lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFsxXS5oaXQocG9zMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MyICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1BhdHJvbGJvYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczEgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIGVuZW15LnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBwbGF5ZXIuZW5lbXlNb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlBdHRhY2socGxheWVyLCBlbmVteSwgY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXNTaG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IGVuZW15QXR0YWNrID0gKHBsYXllciwgZW5lbXksIHgsIHkpID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gcGxheWVyLmJvYXJkO1xuICAgIGNvbnNvbGUubG9nKGdhbWVCb2FyZCk7XG4gICAgbGV0IHNoaXBzID0gcGxheWVyLnNoaXBzO1xuICAgIGxldCBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdDs7XG4gICAgbGV0IGhhc1NoaXAgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXA7XG4gICAgbGV0IHNoaXBMZW5ndGggPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGg7XG4gICAgbGV0IHNoaXBUeXBlID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5zaGlwVHlwZTtcbiAgICBsZXQgcGFuZWw7XG4gICAgaWYgKHggPT09IDApe1xuICAgICAgICBwYW5lbCA9IHk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGFuZWwgPSAnJyArIHggKyB5O1xuICAgIH1cbiAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXRrRGl2MScpW3BhbmVsXTsgIFxuICAgIGxldCBwb3M1ID0gMDtcbiAgICBsZXQgcG9zNCA9IDA7XG4gICAgbGV0IHBvczMgPSAwO1xuICAgIGxldCBwb3MyID0gMDtcbiAgICBsZXQgcG9zMSA9IDA7XG5cbiAgICBpZiAoZW5lbXkuaXNBY3RpdmUgPT09IHRydWUpIHtcblxuICAgICAgICBpZiAoaXNTaG90ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKGhhc1NoaXAgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmV5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuXG4gICAgICAgICAgICBpZiAoc2hpcFR5cGUgPT0gJ0NhcnJpZXInKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M1KTtcbiAgICAgICAgICAgICAgICBwb3M1ICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNCk7XG4gICAgICAgICAgICAgICAgcG9zNCArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnRGVzdHJveWVyJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMyk7XG4gICAgICAgICAgICAgICAgICAgIHBvczMgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMV0uaGl0KHBvczIpO1xuICAgICAgICAgICAgICAgIHBvczIgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1BhdHJvbGJvYXQnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MxKTtcbiAgICAgICAgICAgICAgICBwb3MxICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICBlbmVteS50b2dnbGUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVuZW15KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlcyA9IHBsYXllci5lbmVteU1vdmUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIGVuZW15QXR0YWNrKHBsYXllciwgZW5lbXksIGNvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1sxXSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfVxufVxuXG5leHBvcnQgeyBcblxuICAgIHJlbmRlckdCb2FyZCxcbiAgICBhdGtMaXN0ZW5lcixcbiB9OyIsImltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vcGxheWVyRmFjdG9yeSc7XG5pbXBvcnQgeyByZW5kZXJHQm9hcmQsIGF0a0xpc3RlbmVyIH0gZnJvbSAnLi9yZW5kZXInO1xuXG5jb25zdCBnYW1lID0gKCkgPT4ge1xuXG4gICAgLy9jcmVhdGUgcGxheWVyIGFuZCBjb21wdXRlciBwbGF5ZXJcbiAgICAvL3BvcHVsYXRlIGdhbWVib2FyZHMgZm9yIGJvdGggcGxheWVyc1xuXG4gICAgY29uc3QgcGxheWVyQXJyID0gW1xuICAgICAgICBQbGF5ZXIoXCJwbGF5ZXIxXCIsIHRydWUpLFxuICAgICAgICBQbGF5ZXIoXCJjb21wdXRlclwiLCBmYWxzZSlcbiAgICBdO1xuXG4gICAgcGxheWVyQXJyWzBdLmJvYXJkLnBsYWNlU2hpcCgyLCAyLCA1LCAnQ2FycmllcicpO1xuICAgIHBsYXllckFyclswXS5ib2FyZC5wbGFjZVNoaXAoOCwgMCwgNCwgJ0JhdHRsZXNoaXAnKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDYsIDcsIDMsICdEZXN0cm95ZXInKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDUsIDEsIDMsICdTdWJtYXJpbmUnKTtcbiAgICBwbGF5ZXJBcnJbMF0uYm9hcmQucGxhY2VTaGlwKDEsIDcsIDIsICdQYXRyb2xib2F0Jyk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCk7XG4gICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQsIDEpO1xuXG4gICAgcGxheWVyQXJyWzFdLmJvYXJkLnBsYWNlU2hpcCg4LCAxLCA1LCAnQ2FycmllcicpO1xuICAgIHBsYXllckFyclsxXS5ib2FyZC5wbGFjZVNoaXAoMywgNSwgNCwgJ0JhdHRsZXNoaXAnKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDYsIDMsIDMsICdEZXN0cm95ZXInKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDEsIDEsIDMsICdTdWJtYXJpbmUnKTtcbiAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VTaGlwKDAsIDYsIDIsICdQYXRyb2xib2F0Jyk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQXJyWzFdLmJvYXJkLmdhbWVCb2FyZCk7XG4gICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclsxXS5ib2FyZC5nYW1lQm9hcmQsIDIpO1xuXG4gICAgYXRrTGlzdGVuZXIocGxheWVyQXJyWzBdLCBwbGF5ZXJBcnJbMV0sIDIpO1xuICAgIC8vIGF0a0xpc3RlbmVyKHBsYXllckFyclsxXSwgcGxheWVyQXJyWzBdLCAyKTtcblxuICAgIC8vIGlmIChwbGF5ZXJBcnJbMF0uYm9hcmQuYWxsU2hpcHNTdW5rKHBsYXllckFyclswXS5zaGlwcykgPT09IHRydWUpIHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ1BsYXllciB3b24hJyk7XG4gICAgLy8gfSBlbHNlIGlmIChwbGF5ZXJBcnJbMV0uYm9hcmQuYWxsU2hpcHNTdW5rKHBsYXllckFyclsxXS5zaGlwcykgPT09IHRydWUpIHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ0NvbXB1dGVyIHdvbiEnKTtcbiAgICAvLyB9O1xuXG59O1xuXG5leHBvcnQgeyBnYW1lIH07IiwiaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vZ2FtZSc7XG5cbmdhbWUoKTsiXSwibmFtZXMiOlsic2hpcEZhY3RvcnkiLCJsZW5ndGgiLCJzaGlwIiwiaGl0IiwicG9zIiwiaXNTdW5rIiwiY291bnQiLCJzdW5rIiwiZm9yRWFjaCIsIml0ZW0iLCJQbGF5ZXIiLCJuYW1lIiwiaXNBY3RpdmUiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImRlc3Ryb3llciIsInN1Ym1hcmluZSIsInBhdHJvbEJvYXQiLCJzdGF0ZSIsInRvZ2dsZSIsImJvYXJkIiwiZ2FtZUJvYXJkIiwiaSIsImoiLCJoYXNTaGlwIiwiaXNTaG90Iiwic2hpcExlbmd0aCIsInNoaXBUeXBlIiwieFBvaW50IiwieVBvaW50IiwicGxhY2VTaGlwIiwieCIsInkiLCJyZWNlaXZlQXR0YWNrIiwiYWxsU2hpcHNTdW5rIiwiYXJyIiwiZmlsdGVyIiwic2hpcHMiLCJnYW1lQm9hcmRGYWN0b3J5IiwiZW5lbXlNb3ZlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmVuZGVyR0JvYXJkIiwibnVtIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicm93MSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyb3cyIiwicm93MyIsInJvdzQiLCJyb3c1Iiwicm93NiIsInJvdzciLCJyb3c4Iiwicm93OSIsInJvdzEwIiwiaW5kZXgiLCJzdWJpdGVtIiwic3ViaW5kZXgiLCJzcXVhcmVEaXYiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImdldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiZW5lbXlBdHRhY2siLCJwbGF5ZXIiLCJlbmVteSIsImNvbnNvbGUiLCJsb2ciLCJwYW5lbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwb3M1IiwicG9zNCIsInBvczMiLCJwb3MyIiwicG9zMSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiY29vcmRpbmF0ZXMiLCJwbGF5ZXJBcnIiLCJyZXNwb25zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiYXRrTGlzdGVuZXIiLCJnYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==