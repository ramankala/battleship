(()=>{"use strict";const e=e=>{const t=[];return{ship:t,length:e,hit:e=>t[e]="hit",isSunk:()=>{let r=0,i=!1;return t.forEach((function(e){"hit"===e&&(r+=1)})),i=r===e,i}}},t=(t,r=!1)=>{let i=e(5),o=e(4),l=e(3),a=e(3),n=e(2),d={name:t,isActive:r};return{get name(){return d.name},get isActive(){return d.isActive},toggle(){d.isActive=!d.isActive},board:(()=>{let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let t=0;t<10;t++)for(let r=0;r<10;r++)e[t][r]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:e,placeHorizontal:(t,r,i,o)=>{for(let l=0;l<i;l++)e[t][r].hasShip=!0,e[t][r].shipLength=i,e[t][r].shipType=o,e[t][r].xPoint=t,e[t][r].yPoint=r,r+=1;return e},placeVert:(t,r,i,o)=>{for(let l=0;l<i;l++)e[t][r].hasShip=!0,e[t][r].shipLength=i,e[t][r].shipType=o,e[t][r].xPoint=t,e[t][r].yPoint=r,t+=1;return e},receiveAttack:(t,r)=>!0===e[t][r].hasShip?(e[t][r].isShot=!0,"Hit"):(e[t][r].isShot=!0,e),allShipsSunk:e=>e.filter((e=>e.isSunk())).length===e.length}})(),ships:[i,o,l,a,n],enemyMove:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}},r=(e,t)=>{let r=document.querySelector(`#container${t}`),i=document.createElement("div");i.setAttribute("id","row1");let o=document.createElement("div");o.setAttribute("id","row2");let l=document.createElement("div");l.setAttribute("id","row3");let a=document.createElement("div");a.setAttribute("id","row4");let n=document.createElement("div");n.setAttribute("id","row5");let d=document.createElement("div");d.setAttribute("id","row6");let s=document.createElement("div");s.setAttribute("id","row7");let c=document.createElement("div");c.setAttribute("id","row8");let u=document.createElement("div");u.setAttribute("id","row9");let g=document.createElement("div");g.setAttribute("id","row10"),e.forEach((function(e,h){e.forEach((function(e,m){let p=document.createElement("div");p.setAttribute("id",`squareDiv${h}${m}`),p.setAttribute("data-y-coord",m),p.setAttribute("data-x-coord",h),p.setAttribute("data-has-ship",e.hasShip),p.setAttribute("data-is-shot",e.isShot),p.classList.add(`atkDiv${t}`),p.textContent=e.hasShip;for(let e=0;e<10;e++)p.getAttribute("id")==`squareDiv0${e}`?i.appendChild(p):p.getAttribute("id")==`squareDiv1${e}`?o.appendChild(p):p.getAttribute("id")==`squareDiv2${e}`?l.appendChild(p):p.getAttribute("id")==`squareDiv3${e}`?a.appendChild(p):p.getAttribute("id")==`squareDiv4${e}`?n.appendChild(p):p.getAttribute("id")==`squareDiv5${e}`?d.appendChild(p):p.getAttribute("id")==`squareDiv6${e}`?s.appendChild(p):p.getAttribute("id")==`squareDiv7${e}`?c.appendChild(p):p.getAttribute("id")==`squareDiv8${e}`?u.appendChild(p):p.getAttribute("id")==`squareDiv9${e}`&&g.appendChild(p);r.appendChild(i),r.appendChild(o),r.appendChild(l),r.appendChild(a),r.appendChild(n),r.appendChild(d),r.appendChild(s),r.appendChild(c),r.appendChild(u),r.appendChild(g)}))}))},i=(e,t,r)=>{let i,l,a,n,d,s=t.board,c=t.ships,u=document.getElementsByClassName(`atkDiv${r}`),g=0,h=0,m=0,p=0,f=0;for(let r=0;r<u.length;r++)u[r].addEventListener("click",(function(r){if(!0===e.isActive&&(l=r.target.getAttribute("data-y-coord"),a=r.target.getAttribute("data-x-coord"),i=s.gameBoard[a][l].isShot,n=s.gameBoard[a][l].shipLength,d=s.gameBoard[a][l].shipType,!1===i)){if("true"===r.target.getAttribute("data-has-ship")?r.target.style.backgroundColor="red":r.target.style.backgroundColor="grey",console.log(a),console.log(l),s.receiveAttack(a,l),!0===s.allShipsSunk(c))return void console.log("Player won!");if(!0===e.board.allShipsSunk(e.ships))return void console.log("Computer won!");"Carrier"==d?(c.filter((e=>e.length==n))[0].hit(g),g+=1):"Battleship"==d?(c.filter((e=>e.length==n))[0].hit(h),h+=1):"Destroyer"==d?(c.filter((e=>e.length==n))[0].hit(m),m+=1):"Submarine"==d?(c.filter((e=>e.length==n))[1].hit(p),p+=1):"Patrolboat"==d&&(c.filter((e=>e.length==n))[0].hit(f),f+=1),e.toggle(),t.toggle();let i=e.enemyMove();console.log(i),o(e,t,i[0],i[1])}}))},o=(e,t,r,i)=>{let l,a=e.board,n=e.ships,d=a.gameBoard[r][i].isShot,s=a.gameBoard[r][i].hasShip,c=a.gameBoard[r][i].shipLength,u=a.gameBoard[r][i].shipType;l=0===r?i:""+r+i;let g=document.getElementsByClassName("atkDiv1")[l],h=0,m=0,p=0,f=0,y=0;if(!0===t.isActive)if(!1===d){if(g.style.backgroundColor=!0===s?"red":"grey",a.receiveAttack(r,i),!0===a.allShipsSunk(n))return void console.log("Computer won!");if(!0===t.board.allShipsSunk(t.ships))return void console.log("User won!");"Carrier"==u?(n.filter((e=>e.length==c))[0].hit(h),h+=1):"Battleship"==u?(n.filter((e=>e.length==c))[0].hit(m),m+=1):"Destroyer"==u?(n.filter((e=>e.length==c))[0].hit(p),p+=1):"Submarine"==u?(n.filter((e=>e.length==c))[1].hit(f),f+=1):"Patrolboat"==u&&(n.filter((e=>e.length==c))[0].hit(y),y+=1),e.toggle(),t.toggle()}else{let r=e.enemyMove();o(e,t,r[0],r[1])}};(()=>{const e=document.querySelector("#startBtn"),o=document.querySelector("#alignBtn"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),d=document.querySelector("#Submarine"),s=document.querySelector("#PatrolBoat");l.classList.add("horizontal"),a.classList.add("horizontal"),n.classList.add("horizontal"),d.classList.add("horizontal"),s.classList.add("horizontal"),l.style.flexDirection="row",l.setAttribute("data-alignment","row");const c=[t("player1",!0),t("computer",!1)],u=e=>{e.dataTransfer.setData("text/plain",e.target.id),e.currentTarget.style.backgroundColor="green"};l.addEventListener("dragstart",u),a.addEventListener("dragstart",u),n.addEventListener("dragstart",u),d.addEventListener("dragstart",u),s.addEventListener("dragstart",u),r(c[0].board.gameBoard,1),o.addEventListener("click",(function(){"row"===l.style.flexDirection?(l.style.flexDirection="column",a.style.flexDirection="column",n.style.flexDirection="column",d.style.flexDirection="column",s.style.flexDirection="column",l.setAttribute("data-alignment","column")):(l.style.flexDirection="row",a.style.flexDirection="row",n.style.flexDirection="row",d.style.flexDirection="row",s.style.flexDirection="row",l.setAttribute("data-alignment","row"))})),(e=>{const t=e=>{e.preventDefault()},r=t=>{t.preventDefault(),console.log(t.target.getAttribute("data-y-coord")),console.log(t.target.getAttribute("data-x-coord"));let r=parseInt(t.target.getAttribute("data-x-coord")),i=parseInt(t.target.getAttribute("data-y-coord")),o=t.dataTransfer.getData("text"),l=document.querySelector("#Carrier").getAttribute("data-alignment");if(console.log(e),"Carrier"===o)if(console.log(l),"row"===l){e.placeHorizontal(r,i,5,o);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",i++}else if("column"===l){e.placeVert(r,i,5,o);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",r++}if("Battleship"===o)if("row"===l){e.placeHorizontal(r,i,4,o);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",i++}else if("column"===l){e.placeVert(r,i,4,o);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",r++}if("Destroyer"===o)if("row"===l){e.placeHorizontal(r,i,3,o);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",i++}else if("column"===l){e.placeVert(r,i,3,o);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",r++}if("Submarine"===o)if("row"===l){e.placeHorizontal(r,i,3,o);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",i++}else if("column"===l){e.placeVert(r,i,3,o);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",r++}if("PatrolBoat"===o)if("row"===l){e.placeHorizontal(r,i,2,o);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",i++}else if("column"===l){e.placeVert(r,i,2,o);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${i}`).style.backgroundColor="green",r++}};let i=document.getElementsByClassName("atkDiv1");for(let e=0;e<i.length;e++)i[e].addEventListener("dragover",t),i[e].addEventListener("drop",r)})(c[0].board),e.addEventListener("click",(function(){(()=>{let e=document.querySelector("#container1");for(;e.firstChild;)e.removeChild(e.firstChild)})(),r(c[0].board.gameBoard,1),r(c[1].board.gameBoard,2),i(c[0],c[1],2),i(c[1],c[0],2)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hCdkMsRUFBT3pDLGdCQUFnQkMsRUFBR0MsRUFBRyxFQUFHNEUsR0FDaEMsSUFBSyxJQUFJdEYsRUFBSSxFQUFHQSxFQUFJLEVBQUdBLElBQ0h5QixTQUFTZ0UsZUFBZSxZQUFZaEYsSUFBSUMsS0FDOUNtRCxNQUFNQyxnQkFBa0IsUUFDbENwRCxTQUVELEdBQWMsV0FBVjhFLEVBQW9CLENBQzNCdkMsRUFBT3RDLFVBQVVGLEVBQUdDLEVBQUcsRUFBRzRFLEdBQzFCLElBQUssSUFBSXRGLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNIeUIsU0FBU2dFLGVBQWUsWUFBWWhGLElBQUlDLEtBQzlDbUQsTUFBTUMsZ0JBQWtCLFFBQ2xDckQsTUFLaEIsSUFBSTBDLEVBQVcxQixTQUFTMkIsdUJBQXVCLFdBRS9DLElBQUssSUFBSXBELEVBQUksRUFBR0EsRUFBSW1ELEVBQVN4RSxPQUFRcUIsSUFDakNtRCxFQUFTbkQsR0FBRzBELGlCQUFpQixXQUFZd0IsR0FDekMvQixFQUFTbkQsR0FBRzBELGlCQUFpQixPQUFRMEIsSUM5UXpDTSxDQUFZZCxFQUFVLEdBQUc5RSxPQU16QnNFLEVBQVNWLGlCQUFpQixTQUFTLFdENlF0QixNQUNiLElBQUlpQyxFQUFTbEUsU0FBU0MsY0FBYyxlQUNwQyxLQUFPaUUsRUFBT0MsWUFDVkQsRUFBT0UsWUFBWUYsRUFBT0MsYUMvUTFCRSxHQUVBeEUsRUFBYXNELEVBQVUsR0FBRzlFLE1BQU1DLFVBQVcsR0FDM0N1QixFQUFhc0QsRUFBVSxHQUFHOUUsTUFBTUMsVUFBVyxHQUMzQ2lELEVBQVk0QixFQUFVLEdBQUlBLEVBQVUsR0FBSSxHQUN4QzVCLEVBQVk0QixFQUFVLEdBQUlBLEVBQVUsR0FBSSxPQy9FaERtQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lQm9hcmRGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcmVuZGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNoaXBGYWN0b3J5IH0gZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmNvbnN0IGdhbWVCb2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gICAgbGV0IGdhbWVCb2FyZCA9IFtcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW2ldW2pdID0gKHtoYXNTaGlwOiBmYWxzZSwgaXNTaG90OiBmYWxzZSwgc2hpcExlbmd0aDogMCwgc2hpcFR5cGU6ICduL2EnLCB4UG9pbnQ6IDAsIHlQb2ludDogMH0pO1xuICAgICAgICB9O1xuICAgIH07XG5cblxuICAgIGNvbnN0IHBsYWNlSG9yaXpvbnRhbCA9ICh4LCB5LCBzaGlwTGVuZ3RoLCBzaGlwVHlwZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9IHRydWU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcExlbmd0aCA9IHNoaXBMZW5ndGg7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcFR5cGUgPSBzaGlwVHlwZTtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS54UG9pbnQgPSB4O1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnlQb2ludCA9IHk7XG4gICAgICAgICAgICB5ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICB9XG4gICAgY29uc3QgcGxhY2VWZXJ0ID0gKHgsIHksIHNoaXBMZW5ndGgsIHNoaXBUeXBlKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5zaGlwTGVuZ3RoID0gc2hpcExlbmd0aDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5zaGlwVHlwZSA9IHNoaXBUeXBlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnhQb2ludCA9IHg7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueVBvaW50ID0geTtcbiAgICAgICAgICAgIHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICAgIH1cblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoeCwgeSkgPT4ge1xuICAgICAgICBpZiAoZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPT09IHRydWUpe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gJ0hpdCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaXNTaG90ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgYWxsU2hpcHNTdW5rID0gKGFycikgPT4ge1xuICAgICAgICBjb25zdCBzdW5rZW5TaGlwcyA9IGFyci5maWx0ZXIoc2hpcHMgPT4gc2hpcHMuaXNTdW5rKCkpO1xuICAgICAgICBpZiAoc3Vua2VuU2hpcHMubGVuZ3RoID09PSBhcnIubGVuZ3RoKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnYW1lQm9hcmQsXG4gICAgICAgIHBsYWNlSG9yaXpvbnRhbCxcbiAgICAgICAgcGxhY2VWZXJ0LFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBhbGxTaGlwc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgZ2FtZUJvYXJkRmFjdG9yeSB9OyIsIlxuY29uc3Qgc2hpcEZhY3RvcnkgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFtdO1xuXG4gICAgY29uc3QgaGl0ID0gKHBvcykgPT4gc2hpcFtwb3NdID0gJ2hpdCc7XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGxldCBzdW5rID0gZmFsc2U7XG5cbiAgICAgICAgc2hpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICdoaXQnKXtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvdW50ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN1bmsgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VuayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1bms7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNoaXAsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgaGl0LFxuICAgICAgICBpc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgc2hpcEZhY3RvcnkgfTsiLCJpbXBvcnQgeyBnYW1lQm9hcmRGYWN0b3J5IH0gZnJvbSAnLi9nYW1lQm9hcmRGYWN0b3J5JztcbmltcG9ydCB7IHNoaXBGYWN0b3J5IH0gZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmNvbnN0IFBsYXllciA9IChuYW1lLCBpc0FjdGl2ZSA9IGZhbHNlKSA9PiB7XG5cbiAgICBsZXQgY2FycmllciA9IHNoaXBGYWN0b3J5KDUpO1xuICAgIGxldCBiYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoNCk7XG4gICAgbGV0IGRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KDMpO1xuICAgIGxldCBzdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgzKTtcbiAgICBsZXQgcGF0cm9sQm9hdCA9IHNoaXBGYWN0b3J5KDIpO1xuICAgIFxuICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaXNBY3RpdmUsXG4gICAgfVxuXG4gICAgbGV0IGJvYXJkID0gZ2FtZUJvYXJkRmFjdG9yeSgpO1xuXG4gICAgbGV0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGRlc3Ryb3llciwgc3VibWFyaW5lLCBwYXRyb2xCb2F0XTtcblxuICAgIGNvbnN0IGVuZW15TW92ZSA9ICgpID0+IHtcbiAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcblxuICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBuYW1lKCl7cmV0dXJuIHN0YXRlLm5hbWU7fSxcbiAgICAgICAgZ2V0IGlzQWN0aXZlKCl7cmV0dXJuIHN0YXRlLmlzQWN0aXZlO30sXG4gICAgICAgIHRvZ2dsZSgpeyBzdGF0ZS5pc0FjdGl2ZSA9ICFzdGF0ZS5pc0FjdGl2ZTt9LFxuICAgICAgICBib2FyZCxcbiAgICAgICAgc2hpcHMsXG4gICAgICAgIGVuZW15TW92ZSxcbiAgICB9XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTsiLCJjb25zdCByZW5kZXJHQm9hcmQgPSAoZ2FtZUJvYXJkLCBudW0pID0+IHtcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NvbnRhaW5lciR7bnVtfWApO1xuICAgIGxldCByb3cxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzEnKTtcbiAgICBsZXQgcm93MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzIuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cyJyk7XG4gICAgbGV0IHJvdzMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3czLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MycpO1xuICAgIGxldCByb3c0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93NC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzQnKTtcbiAgICBsZXQgcm93NSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzUuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c1Jyk7XG4gICAgbGV0IHJvdzYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c2LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NicpO1xuICAgIGxldCByb3c3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Ny5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzcnKTtcbiAgICBsZXQgcm93OCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzguc2V0QXR0cmlidXRlKCdpZCcsICdyb3c4Jyk7XG4gICAgbGV0IHJvdzkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c5LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93OScpO1xuICAgIGxldCByb3cxMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzEwLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MTAnKTtcblxuICAgIGdhbWVCb2FyZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGl0ZW0uZm9yRWFjaChmdW5jdGlvbihzdWJpdGVtLCBzdWJpbmRleCkge1xuICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnaWQnLCBgc3F1YXJlRGl2JHtpbmRleH0ke3N1YmluZGV4fWApO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJywgc3ViaW5kZXgpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS14LWNvb3JkJywgaW5kZXgpO1xuICAgICAgICAgICAgc3F1YXJlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1oYXMtc2hpcCcsIHN1Yml0ZW0uaGFzU2hpcCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLWlzLXNob3QnLCBzdWJpdGVtLmlzU2hvdCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuY2xhc3NMaXN0LmFkZChgYXRrRGl2JHtudW19YCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYudGV4dENvbnRlbnQgPSBzdWJpdGVtLmhhc1NoaXA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYwJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cxLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYxJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cyLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYyJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3czLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXYzJHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c0LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY0JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c1LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY1JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c2LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY2JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c3LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY3JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c4LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY4JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3c5LmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmVEaXYuZ2V0QXR0cmlidXRlKCdpZCcpID09IGBzcXVhcmVEaXY5JHtpfWApe1xuICAgICAgICAgICAgICAgICAgICByb3cxMC5hcHBlbmRDaGlsZChzcXVhcmVEaXYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cxKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cyKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3czKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c0KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c1KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c2KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c3KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c4KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3c5KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cxMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgYXRrTGlzdGVuZXIgPSAocGxheWVyLCBlbmVteSwgbnVtKSA9PiB7XG4gICAgbGV0IGdhbWVCb2FyZCA9IGVuZW15LmJvYXJkO1xuICAgIGxldCBzaGlwcyA9IGVuZW15LnNoaXBzO1xuICAgIGxldCByZXNwb25zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYGF0a0RpdiR7bnVtfWApO1xuICAgIGxldCBpc1Nob3Q7XG4gICAgbGV0IHlQb2ludDtcbiAgICBsZXQgeFBvaW50O1xuICAgIGxldCBzaGlwTGVuZ3RoO1xuICAgIGxldCBzaGlwVHlwZTtcbiAgICBsZXQgcG9zNSA9IDA7XG4gICAgbGV0IHBvczQgPSAwO1xuICAgIGxldCBwb3MzID0gMDtcbiAgICBsZXQgcG9zMiA9IDA7XG4gICAgbGV0IHBvczEgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzQWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgeVBvaW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKTtcbiAgICAgICAgICAgICAgICB4UG9pbnQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcpO1xuICAgICAgICAgICAgICAgIGlzU2hvdCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLmlzU2hvdDtcbiAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0uc2hpcExlbmd0aDtcbiAgICAgICAgICAgICAgICBzaGlwVHlwZSA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLnNoaXBUeXBlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzU2hvdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1oYXMtc2hpcCcpID09PSAndHJ1ZScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JleSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeFBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soeFBvaW50LCB5UG9pbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lQm9hcmQuYWxsU2hpcHNTdW5rKHNoaXBzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BsYXllciB3b24hJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGxheWVyLmJvYXJkLmFsbFNoaXBzU3VuayhwbGF5ZXIuc2hpcHMpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcHV0ZXIgd29uIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpcFR5cGUgPT0gJ0NhcnJpZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnQmF0dGxlc2hpcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zNCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICBwb3MzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMV0uaGl0KHBvczIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zMiArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdQYXRyb2xib2F0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MxICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBlbmVteS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gcGxheWVyLmVuZW15TW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb29yZGluYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIGVuZW15QXR0YWNrKHBsYXllciwgZW5lbXksIGNvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1sxXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuXG5jb25zdCBlbmVteUF0dGFjayA9IChwbGF5ZXIsIGVuZW15LCB4LCB5KSA9PiB7XG4gICAgbGV0IGdhbWVCb2FyZCA9IHBsYXllci5ib2FyZDtcbiAgICBsZXQgc2hpcHMgPSBwbGF5ZXIuc2hpcHM7XG4gICAgbGV0IGlzU2hvdCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeF1beV0uaXNTaG90OztcbiAgICBsZXQgaGFzU2hpcCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeF1beV0uaGFzU2hpcDtcbiAgICBsZXQgc2hpcExlbmd0aCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeF1beV0uc2hpcExlbmd0aDtcbiAgICBsZXQgc2hpcFR5cGUgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlO1xuICAgIGxldCBwYW5lbDtcbiAgICBpZiAoeCA9PT0gMCl7XG4gICAgICAgIHBhbmVsID0geTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwYW5lbCA9ICcnICsgeCArIHk7XG4gICAgfVxuICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhdGtEaXYxJylbcGFuZWxdOyAgXG4gICAgbGV0IHBvczUgPSAwO1xuICAgIGxldCBwb3M0ID0gMDtcbiAgICBsZXQgcG9zMyA9IDA7XG4gICAgbGV0IHBvczIgPSAwO1xuICAgIGxldCBwb3MxID0gMDtcblxuICAgIGlmIChlbmVteS5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuXG4gICAgICAgIGlmIChpc1Nob3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoaGFzU2hpcCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChnYW1lQm9hcmQuYWxsU2hpcHNTdW5rKHNoaXBzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wdXRlciB3b24hJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmVteS5ib2FyZC5hbGxTaGlwc1N1bmsoZW5lbXkuc2hpcHMpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgd29uIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChzaGlwVHlwZSA9PSAnQ2FycmllcicpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczUpO1xuICAgICAgICAgICAgICAgIHBvczUgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3M0KTtcbiAgICAgICAgICAgICAgICBwb3M0ICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MzKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zMyArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnU3VibWFyaW5lJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFsxXS5oaXQocG9zMik7XG4gICAgICAgICAgICAgICAgcG9zMiArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnUGF0cm9sYm9hdCcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczEpO1xuICAgICAgICAgICAgICAgIHBvczEgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllci50b2dnbGUoKTtcbiAgICAgICAgICAgIGVuZW15LnRvZ2dsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gcGxheWVyLmVuZW15TW92ZSgpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgZW5lbXlBdHRhY2socGxheWVyLCBlbmVteSwgY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICB9O1xufTtcblxuY29uc3QgcGxhY2VQaWVjZXMgPSAocGxheWVyKSA9PiB7XG5cbiAgICBjb25zdCBvbkRyYWdPdmVyID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBjb25zdCBvbkRyb3AgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJykpO1xuICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcpKTtcbiAgICAgICAgbGV0IHggPSBwYXJzZUludChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcpKTtcbiAgICAgICAgbGV0IHkgPSBwYXJzZUludChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcpKTtcbiAgICAgICAgLy8gZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgbGV0IGRhdGEgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0Jyk7XG4gICAgICAgIGxldCBhbGlnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNDYXJyaWVyJykuZ2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIpO1xuICAgICAgICBpZiAoZGF0YSA9PT0gJ0NhcnJpZXInKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsaWduKTtcbiAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgNSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSAnQmF0dGxlc2hpcCcpe1xuICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCA0LCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgNCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSAnRGVzdHJveWVyJyl7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdTdWJtYXJpbmUnKXtcbiAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgMywgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PT0gJ1BhdHJvbEJvYXQnKXtcbiAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgMiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDIsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmVzcG9uc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhdGtEaXYxJyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgcmVzcG9uc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyKTtcbiAgICAgICAgcmVzcG9uc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcCk7XG4gICAgfTtcblxufVxuXG5jb25zdCBkZVJlbmRlciA9ICgpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWluZXIxXCIpO1xuICAgIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgXG5cbiAgICByZW5kZXJHQm9hcmQsXG4gICAgYXRrTGlzdGVuZXIsXG4gICAgcGxhY2VQaWVjZXMsXG4gICAgZGVSZW5kZXIsXG4gfTsiLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuL3BsYXllckZhY3RvcnknO1xuaW1wb3J0IHsgcmVuZGVyR0JvYXJkLCBhdGtMaXN0ZW5lciwgcGxhY2VQaWVjZXMsIGRlUmVuZGVyIH0gZnJvbSAnLi9yZW5kZXInO1xuXG5jb25zdCBnYW1lID0gKCkgPT4ge1xuXG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnRCdG4nKTtcbiAgICBjb25zdCBhbGlnbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGlnbkJ0bicpO1xuICAgIGNvbnN0IGNhcnJpZXJEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0NhcnJpZXInKTtcbiAgICBjb25zdCBiYXR0bGVEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0JhdHRsZXNoaXAnKTtcbiAgICBjb25zdCBkZXN0ckRyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjRGVzdHJveWVyJyk7XG4gICAgY29uc3Qgc3ViRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNTdWJtYXJpbmUnKTtcbiAgICBjb25zdCBwYXRyb2xEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1BhdHJvbEJvYXQnKTtcbiAgICBjYXJyaWVyRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgYmF0dGxlRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgZGVzdHJEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBzdWJEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBwYXRyb2xEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgY2FycmllckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcbiAgICAvLyBiYXR0bGVEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAnY29sdW1uJyk7XG4gICAgLy8gZGVzdHJEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAnY29sdW1uJyk7XG4gICAgLy8gc3ViRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ2NvbHVtbicpO1xuICAgIC8vIHBhdHJvbERyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdjb2x1bW4nKTtcblxuICAgIGNvbnN0IHBsYXllckFyciA9IFtcbiAgICAgICAgUGxheWVyKFwicGxheWVyMVwiLCB0cnVlKSxcbiAgICAgICAgUGxheWVyKFwiY29tcHV0ZXJcIiwgZmFsc2UpXG4gICAgXTtcblxuICAgIGNvbnN0IG9uRHJhZ1N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGUudGFyZ2V0LmlkKTtcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgfVxuXG4gICAgY2FycmllckRyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIGJhdHRsZURyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIGRlc3RyRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgc3ViRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgcGF0cm9sRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG5cbiAgICByZW5kZXJHQm9hcmQocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCwgMSk7XG5cbiAgICBhbGlnbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID09PSAncm93Jyl7XG4gICAgICAgICAgICBjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBiYXR0bGVEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIGRlc3RyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBzdWJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIHBhdHJvbERyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgY2FycmllckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdjb2x1bW4nKTtcbiAgICAgICAgICAgIC8vIGJhdHRsZURyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdjb2x1bW4nKTtcbiAgICAgICAgICAgIC8vIGRlc3RyRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ2NvbHVtbicpO1xuICAgICAgICAgICAgLy8gc3ViRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ2NvbHVtbicpO1xuICAgICAgICAgICAgLy8gcGF0cm9sRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ2NvbHVtbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FycmllckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgYmF0dGxlRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBkZXN0ckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgc3ViRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBwYXRyb2xEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIGNhcnJpZXJEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAncm93Jyk7XG4gICAgICAgICAgICAvLyBiYXR0bGVEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAncm93Jyk7XG4gICAgICAgICAgICAvLyBkZXN0ckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcbiAgICAgICAgICAgIC8vIHN1YkRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcbiAgICAgICAgICAgIC8vIHBhdHJvbERyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcbiAgICAgICAgfVxuXG4gICAgfSlcblxuICAgIHBsYWNlUGllY2VzKHBsYXllckFyclswXS5ib2FyZCk7XG5cbiAgICAvL2NyZWF0ZSBwbGF5ZXIgYW5kIGNvbXB1dGVyIHBsYXllclxuICAgIC8vcG9wdWxhdGUgZ2FtZWJvYXJkcyBmb3IgYm90aCBwbGF5ZXJzXG4gICAgLy8gcGxhY2VQaWVjZXMocGxheWVyQXJyWzBdLmJvYXJkLCBhbGlnbik7XG5cbiAgICBzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGRlUmVuZGVyKCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQpO1xuICAgICAgICByZW5kZXJHQm9hcmQocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCwgMSk7XG4gICAgICAgIHJlbmRlckdCb2FyZChwbGF5ZXJBcnJbMV0uYm9hcmQuZ2FtZUJvYXJkLCAyKTtcbiAgICAgICAgYXRrTGlzdGVuZXIocGxheWVyQXJyWzBdLCBwbGF5ZXJBcnJbMV0sIDIpO1xuICAgICAgICBhdGtMaXN0ZW5lcihwbGF5ZXJBcnJbMV0sIHBsYXllckFyclswXSwgMik7XG4gICAgfSk7XG5cbn07XG5cbmV4cG9ydCB7IGdhbWUgfTsiLCJpbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9nYW1lJztcblxuZ2FtZSgpOyJdLCJuYW1lcyI6WyJzaGlwRmFjdG9yeSIsImxlbmd0aCIsInNoaXAiLCJoaXQiLCJwb3MiLCJpc1N1bmsiLCJjb3VudCIsInN1bmsiLCJmb3JFYWNoIiwiaXRlbSIsIlBsYXllciIsIm5hbWUiLCJpc0FjdGl2ZSIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sQm9hdCIsInN0YXRlIiwidG9nZ2xlIiwiYm9hcmQiLCJnYW1lQm9hcmQiLCJpIiwiaiIsImhhc1NoaXAiLCJpc1Nob3QiLCJzaGlwTGVuZ3RoIiwic2hpcFR5cGUiLCJ4UG9pbnQiLCJ5UG9pbnQiLCJwbGFjZUhvcml6b250YWwiLCJ4IiwieSIsInBsYWNlVmVydCIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJhcnIiLCJmaWx0ZXIiLCJzaGlwcyIsImdhbWVCb2FyZEZhY3RvcnkiLCJlbmVteU1vdmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyZW5kZXJHQm9hcmQiLCJudW0iLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3cxIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJvdzIiLCJyb3czIiwicm93NCIsInJvdzUiLCJyb3c2Iiwicm93NyIsInJvdzgiLCJyb3c5Iiwicm93MTAiLCJpbmRleCIsInN1Yml0ZW0iLCJzdWJpbmRleCIsInNxdWFyZURpdiIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJhdGtMaXN0ZW5lciIsInBsYXllciIsImVuZW15IiwicmVzcG9uc2UiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicG9zNSIsInBvczQiLCJwb3MzIiwicG9zMiIsInBvczEiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiY29uc29sZSIsImxvZyIsImNvb3JkaW5hdGVzIiwiZW5lbXlBdHRhY2siLCJwYW5lbCIsInN0YXJ0QnRuIiwiYWxpZ25CdG4iLCJjYXJyaWVyRHJhZyIsImJhdHRsZURyYWciLCJkZXN0ckRyYWciLCJzdWJEcmFnIiwicGF0cm9sRHJhZyIsImZsZXhEaXJlY3Rpb24iLCJwbGF5ZXJBcnIiLCJvbkRyYWdTdGFydCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJpZCIsImN1cnJlbnRUYXJnZXQiLCJvbkRyYWdPdmVyIiwicHJldmVudERlZmF1bHQiLCJvbkRyb3AiLCJwYXJzZUludCIsImRhdGEiLCJnZXREYXRhIiwiYWxpZ24iLCJnZXRFbGVtZW50QnlJZCIsInBsYWNlUGllY2VzIiwicGFyZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGVSZW5kZXIiLCJnYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==