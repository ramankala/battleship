(()=>{"use strict";const e=e=>{const t=[];return{ship:t,length:e,hit:e=>t[e]="hit",isSunk:()=>{let r=0,o=!1;return t.forEach((function(e){"hit"===e&&(r+=1)})),o=r===e,o}}},t=(t,r=!1)=>{let o=e(5),i=e(4),l=e(3),a=e(3),n=e(2),d={name:t,isActive:r};return{get name(){return d.name},get isActive(){return d.isActive},toggle(){d.isActive=!d.isActive},board:(()=>{let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let t=0;t<10;t++)for(let r=0;r<10;r++)e[t][r]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:e,placeHorizontal:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,r+=1;return e},placeVert:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,t+=1;return e},receiveAttack:(t,r)=>!0===e[t][r].hasShip?(e[t][r].isShot=!0,"Hit"):(e[t][r].isShot=!0,e),allShipsSunk:e=>e.filter((e=>e.isSunk())).length===e.length,scout:(t,r,o,i)=>{let l=!1;if("row"===i)for(let i=0;i<o;i++)!0===e[t][r].hasShip&&(l=!0),r+=1;else for(let i=0;i<o;i++)!0===e[t][r].hasShip&&(l=!0),t+=1;return l}}})(),ships:[o,i,l,a,n],enemyMove:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}},r=(e,t)=>{let r=document.querySelector(`#container${t}`),o=document.createElement("div");o.setAttribute("id","row1");let i=document.createElement("div");i.setAttribute("id","row2");let l=document.createElement("div");l.setAttribute("id","row3");let a=document.createElement("div");a.setAttribute("id","row4");let n=document.createElement("div");n.setAttribute("id","row5");let d=document.createElement("div");d.setAttribute("id","row6");let s=document.createElement("div");s.setAttribute("id","row7");let c=document.createElement("div");c.setAttribute("id","row8");let u=document.createElement("div");u.setAttribute("id","row9");let g=document.createElement("div");g.setAttribute("id","row10"),e.forEach((function(e,h){e.forEach((function(e,p){let m=document.createElement("div");m.setAttribute("id",`squareDiv${h}${p}`),m.setAttribute("data-y-coord",p),m.setAttribute("data-x-coord",h),m.setAttribute("data-has-ship",e.hasShip),m.setAttribute("data-is-shot",e.isShot),m.classList.add(`atkDiv${t}`),m.textContent=e.hasShip;for(let e=0;e<10;e++)m.getAttribute("id")==`squareDiv0${e}`?o.appendChild(m):m.getAttribute("id")==`squareDiv1${e}`?i.appendChild(m):m.getAttribute("id")==`squareDiv2${e}`?l.appendChild(m):m.getAttribute("id")==`squareDiv3${e}`?a.appendChild(m):m.getAttribute("id")==`squareDiv4${e}`?n.appendChild(m):m.getAttribute("id")==`squareDiv5${e}`?d.appendChild(m):m.getAttribute("id")==`squareDiv6${e}`?s.appendChild(m):m.getAttribute("id")==`squareDiv7${e}`?c.appendChild(m):m.getAttribute("id")==`squareDiv8${e}`?u.appendChild(m):m.getAttribute("id")==`squareDiv9${e}`&&g.appendChild(m);r.appendChild(o),r.appendChild(i),r.appendChild(l),r.appendChild(a),r.appendChild(n),r.appendChild(d),r.appendChild(s),r.appendChild(c),r.appendChild(u),r.appendChild(g)}))}))},o=(e,t,r,i)=>{let l,a=e.board,n=e.ships,d=a.gameBoard[r][i].isShot,s=a.gameBoard[r][i].hasShip,c=a.gameBoard[r][i].shipLength,u=a.gameBoard[r][i].shipType;l=0===r?i:""+r+i;let g=document.getElementsByClassName("atkDiv1")[l],h=0,p=0,m=0,y=0,f=0;if(!0===t.isActive)if(!1===d){if(g.style.backgroundColor=!0===s?"red":"grey",a.receiveAttack(r,i),!0===a.allShipsSunk(n))return void console.log("Computer won!");if(!0===t.board.allShipsSunk(t.ships))return void console.log("User won!");"Carrier"==u?(n.filter((e=>e.length==c))[0].hit(h),h+=1):"Battleship"==u?(n.filter((e=>e.length==c))[0].hit(p),p+=1):"Destroyer"==u?(n.filter((e=>e.length==c))[0].hit(m),m+=1):"Submarine"==u?(n.filter((e=>e.length==c))[1].hit(y),y+=1):"Patrolboat"==u&&(n.filter((e=>e.length==c))[0].hit(f),f+=1),e.toggle(),t.toggle()}else{let r=e.enemyMove();o(e,t,r[0],r[1])}};(()=>{const e=document.querySelector("#startBtn"),i=document.querySelector("#alignBtn"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),d=document.querySelector("#Submarine"),s=document.querySelector("#PatrolBoat");l.classList.add("horizontal"),a.classList.add("horizontal"),n.classList.add("horizontal"),d.classList.add("horizontal"),s.classList.add("horizontal"),l.style.flexDirection="row",l.setAttribute("data-alignment","row");const c=[t("player1",!0),t("computer",!1)],u=e=>{e.dataTransfer.setData("text/plain",e.target.id),e.currentTarget.style.backgroundColor="green"};l.addEventListener("dragstart",u),a.addEventListener("dragstart",u),n.addEventListener("dragstart",u),d.addEventListener("dragstart",u),s.addEventListener("dragstart",u),r(c[0].board.gameBoard,1),i.addEventListener("click",(function(){"row"===l.style.flexDirection?(l.style.flexDirection="column",a.style.flexDirection="column",n.style.flexDirection="column",d.style.flexDirection="column",s.style.flexDirection="column",l.setAttribute("data-alignment","column")):(l.style.flexDirection="row",a.style.flexDirection="row",n.style.flexDirection="row",d.style.flexDirection="row",s.style.flexDirection="row",l.setAttribute("data-alignment","row"))})),(e=>{const t=e=>{e.preventDefault()},r=t=>{t.preventDefault(),console.log(t.target.getAttribute("data-y-coord")),console.log(t.target.getAttribute("data-x-coord"));let r=parseInt(t.target.getAttribute("data-x-coord")),o=parseInt(t.target.getAttribute("data-y-coord")),i=t.dataTransfer.getData("text"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),d=document.querySelector("#Submarine"),s=document.querySelector("#PatrolBoat"),c=l.getAttribute("data-alignment");if(console.log(e),"Carrier"===i&&!1===e.scout(r,o,5,c)){if("row"===c){e.placeHorizontal(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}l.style.display="none"}if("Battleship"===i&&!1===e.scout(r,o,4,c)){if("row"===c){e.placeHorizontal(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}a.style.display="none"}if("Destroyer"===i&&!1===e.scout(r,o,3,c)){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}n.style.display="none"}if("Submarine"===i&&!1===e.scout(r,o,3,c)){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}d.style.display="none"}if("PatrolBoat"===i&&!1===e.scout(r,o,2,c)){if("row"===c){e.placeHorizontal(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}s.style.display="none"}};let o=document.getElementsByClassName("atkDiv1");for(let e=0;e<o.length;e++)o[e].addEventListener("dragover",t),o[e].addEventListener("drop",r)})(c[0].board),e.addEventListener("click",(function(){(()=>{let e=document.querySelector("#container1");for(;e.firstChild;)e.removeChild(e.firstChild)})(),r(c[0].board.gameBoard,1),c[1].board.placeHorizontal(8,1,5,"Carrier"),c[1].board.placeHorizontal(3,5,4,"Battleship"),c[1].board.placeHorizontal(6,3,3,"Destroyer"),c[1].board.placeHorizontal(1,1,3,"Submarine"),c[1].board.placeHorizontal(0,6,2,"Patrolboat"),r(c[1].board.gameBoard,2),((e,t,r)=>{let i,l,a,n,d,s=t.board,c=t.ships,u=document.getElementsByClassName("atkDiv2"),g=0,h=0,p=0,m=0,y=0;for(let r=0;r<u.length;r++)u[r].addEventListener("click",(function(r){if(!0===e.isActive&&(l=r.target.getAttribute("data-y-coord"),a=r.target.getAttribute("data-x-coord"),i=s.gameBoard[a][l].isShot,n=s.gameBoard[a][l].shipLength,d=s.gameBoard[a][l].shipType,!1===i)){if("true"===r.target.getAttribute("data-has-ship")?r.target.style.backgroundColor="red":r.target.style.backgroundColor="grey",console.log(a),console.log(l),s.receiveAttack(a,l),!0===s.allShipsSunk(c))return void console.log("Player won!");if(!0===e.board.allShipsSunk(e.ships))return void console.log("Computer won!");"Carrier"==d?(c.filter((e=>e.length==n))[0].hit(g),g+=1):"Battleship"==d?(c.filter((e=>e.length==n))[0].hit(h),h+=1):"Destroyer"==d?(c.filter((e=>e.length==n))[0].hit(p),p+=1):"Submarine"==d?(c.filter((e=>e.length==n))[1].hit(m),m+=1):"Patrolboat"==d&&(c.filter((e=>e.length==n))[0].hit(y),y+=1),e.toggle(),t.toggle();let i=e.enemyMove();console.log(i),o(e,t,i[0],i[1])}}))})(c[0],c[1])}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWtCLE1BRWpDYyxFQUFFRyxPQUFPbEIsTUFBTUMsZ0JBQWtCLE9BRXJDQyxRQUFRQyxJQUFJMUQsR0FDWnlELFFBQVFDLElBQUl6RCxHQUNaUixFQUFVYSxjQUFjTixFQUFRQyxJQUVNLElBQWxDUixFQUFVYyxhQUFhRyxHQUV2QixZQURBK0MsUUFBUUMsSUFBSSxlQUVULElBQWdELElBQTVDWixFQUFPdEQsTUFBTWUsYUFBYXVDLEVBQU9wQyxPQUV4QyxZQURBK0MsUUFBUUMsSUFBSSxpQkFJQSxXQUFaM0QsR0FFY1csRUFBTUQsUUFBT25DLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTJFLEdBQ2ZBLEdBQVEsR0FDVyxjQUFabkQsR0FFT1csRUFBTUQsUUFBT25DLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTRFLEdBQ2ZBLEdBQVEsR0FDVyxhQUFacEQsR0FFT1csRUFBTUQsUUFBT25DLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSTZFLEdBQ2RBLEdBQVEsR0FDVSxhQUFackQsR0FFT1csRUFBTUQsUUFBT25DLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSThFLEdBQ2ZBLEdBQVEsR0FDVyxjQUFadEQsSUFFT1csRUFBTUQsUUFBT25DLEdBQVFBLEVBQUtELFFBQVV5QixJQUMxQyxHQUFHdkIsSUFBSStFLEdBQ2ZBLEdBQVEsR0FFWlIsRUFBT3ZELFNBQ1B3RCxFQUFNeEQsU0FDTixJQUFJb0UsRUFBY2IsRUFBTy9CLFlBQ3pCMEMsUUFBUUMsSUFBSUMsR0FDWmQsRUFBWUMsRUFBUUMsRUFBT1ksRUFBWSxHQUFJQSxFQUFZLFNDdkVuRW9DLENBQVkzQixFQUFVLEdBQUlBLEVBQVUsUUN2RTVDNEIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaGlwRmFjdG9yeSB9IGZyb20gJy4vc2hpcEZhY3RvcnknO1xuXG5jb25zdCBnYW1lQm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGxldCBnYW1lQm9hcmQgPSBbXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9ICh7aGFzU2hpcDogZmFsc2UsIGlzU2hvdDogZmFsc2UsIHNoaXBMZW5ndGg6IDAsIHNoaXBUeXBlOiAnbi9hJywgeFBvaW50OiAwLCB5UG9pbnQ6IDB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICBjb25zdCBwbGFjZUhvcml6b250YWwgPSAoeCwgeSwgc2hpcExlbmd0aCwgc2hpcFR5cGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGggPSBzaGlwTGVuZ3RoO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlID0gc2hpcFR5cGU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueFBvaW50ID0geDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS55UG9pbnQgPSB5O1xuICAgICAgICAgICAgeSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgfVxuICAgIGNvbnN0IHBsYWNlVmVydCA9ICh4LCB5LCBzaGlwTGVuZ3RoLCBzaGlwVHlwZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9IHRydWU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcExlbmd0aCA9IHNoaXBMZW5ndGg7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uc2hpcFR5cGUgPSBzaGlwVHlwZTtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS54UG9pbnQgPSB4O1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnlQb2ludCA9IHk7XG4gICAgICAgICAgICB4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICB9XG5cbiAgICBjb25zdCBzY291dCA9ICh4LCB5LCBzaGlwTGVuZ3RoLCBhbGlnbm1lbnQpID0+IHtcbiAgICAgICAgbGV0IHJlcG9ydCA9IGZhbHNlO1xuICAgICAgICBpZiAoYWxpZ25tZW50ID09PSAncm93Jyl7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgbGV0IGFuYWx5c2lzID0gZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXA7XG4gICAgICAgICAgICAgICAgaWYgKCBhbmFseXNpcyA9PT0gdHJ1ZSApe1xuICAgICAgICAgICAgICAgICAgICByZXBvcnQgPSB0cnVlOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeSArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGxldCBhbmFseXNpcyA9IGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwO1xuICAgICAgICAgICAgICAgIGlmIChhbmFseXNpcyA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydCA9IHRydWU7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKHgsIHkpID0+IHtcbiAgICAgICAgaWYgKGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwID09PSB0cnVlKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5pc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuICdIaXQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFsbFNoaXBzU3VuayA9IChhcnIpID0+IHtcbiAgICAgICAgY29uc3Qgc3Vua2VuU2hpcHMgPSBhcnIuZmlsdGVyKHNoaXBzID0+IHNoaXBzLmlzU3VuaygpKTtcbiAgICAgICAgaWYgKHN1bmtlblNoaXBzLmxlbmd0aCA9PT0gYXJyLmxlbmd0aCl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2FtZUJvYXJkLFxuICAgICAgICBwbGFjZUhvcml6b250YWwsXG4gICAgICAgIHBsYWNlVmVydCxcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgYWxsU2hpcHNTdW5rLFxuICAgICAgICBzY291dCxcbiAgICB9XG59O1xuXG5leHBvcnQgeyBnYW1lQm9hcmRGYWN0b3J5IH07IiwiXG5jb25zdCBzaGlwRmFjdG9yeSA9IChsZW5ndGgpID0+IHtcbiAgICBjb25zdCBzaGlwID0gW107XG5cbiAgICBjb25zdCBoaXQgPSAocG9zKSA9PiBzaGlwW3Bvc10gPSAnaGl0JztcblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgbGV0IHN1bmsgPSBmYWxzZTtcblxuICAgICAgICBzaGlwLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gJ2hpdCcpe1xuICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY291bnQgPT09IGxlbmd0aCkge1xuICAgICAgICAgICAgc3VuayA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdW5rID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VuaztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2hpcCxcbiAgICAgICAgbGVuZ3RoLFxuICAgICAgICBoaXQsXG4gICAgICAgIGlzU3VuayxcbiAgICB9XG59O1xuXG5leHBvcnQgeyBzaGlwRmFjdG9yeSB9OyIsImltcG9ydCB7IGdhbWVCb2FyZEZhY3RvcnkgfSBmcm9tICcuL2dhbWVCb2FyZEZhY3RvcnknO1xuaW1wb3J0IHsgc2hpcEZhY3RvcnkgfSBmcm9tICcuL3NoaXBGYWN0b3J5JztcblxuY29uc3QgUGxheWVyID0gKG5hbWUsIGlzQWN0aXZlID0gZmFsc2UpID0+IHtcblxuICAgIGxldCBjYXJyaWVyID0gc2hpcEZhY3RvcnkoNSk7XG4gICAgbGV0IGJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSg0KTtcbiAgICBsZXQgZGVzdHJveWVyID0gc2hpcEZhY3RvcnkoMyk7XG4gICAgbGV0IHN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KDMpO1xuICAgIGxldCBwYXRyb2xCb2F0ID0gc2hpcEZhY3RvcnkoMik7XG4gICAgXG4gICAgbGV0IHN0YXRlID0ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBpc0FjdGl2ZSxcbiAgICB9XG5cbiAgICBsZXQgYm9hcmQgPSBnYW1lQm9hcmRGYWN0b3J5KCk7XG5cbiAgICBsZXQgc2hpcHMgPSBbY2FycmllciwgYmF0dGxlc2hpcCwgZGVzdHJveWVyLCBzdWJtYXJpbmUsIHBhdHJvbEJvYXRdO1xuXG4gICAgY29uc3QgZW5lbXlNb3ZlID0gKCkgPT4ge1xuICAgICAgICBsZXQgeCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkpO1xuICAgICAgICBsZXQgeSA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkpO1xuXG4gICAgICAgIHJldHVybiBbeCwgeV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IG5hbWUoKXtyZXR1cm4gc3RhdGUubmFtZTt9LFxuICAgICAgICBnZXQgaXNBY3RpdmUoKXtyZXR1cm4gc3RhdGUuaXNBY3RpdmU7fSxcbiAgICAgICAgdG9nZ2xlKCl7IHN0YXRlLmlzQWN0aXZlID0gIXN0YXRlLmlzQWN0aXZlO30sXG4gICAgICAgIGJvYXJkLFxuICAgICAgICBzaGlwcyxcbiAgICAgICAgZW5lbXlNb3ZlLFxuICAgIH1cbn07XG5cbmV4cG9ydCB7IFBsYXllciB9OyIsImNvbnN0IHJlbmRlckdCb2FyZCA9IChnYW1lQm9hcmQsIG51bSkgPT4ge1xuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY29udGFpbmVyJHtudW19YCk7XG4gICAgbGV0IHJvdzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cxLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MScpO1xuICAgIGxldCByb3cyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Mi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzInKTtcbiAgICBsZXQgcm93MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzMuc2V0QXR0cmlidXRlKCdpZCcsICdyb3czJyk7XG4gICAgbGV0IHJvdzQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c0LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NCcpO1xuICAgIGxldCByb3c1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93NS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzUnKTtcbiAgICBsZXQgcm93NiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzYuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c2Jyk7XG4gICAgbGV0IHJvdzcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c3LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NycpO1xuICAgIGxldCByb3c4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93OC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzgnKTtcbiAgICBsZXQgcm93OSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzkuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c5Jyk7XG4gICAgbGV0IHJvdzEwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93MTAuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cxMCcpO1xuXG4gICAgZ2FtZUJvYXJkLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaXRlbS5mb3JFYWNoKGZ1bmN0aW9uKHN1Yml0ZW0sIHN1YmluZGV4KSB7XG4gICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdpZCcsIGBzcXVhcmVEaXYke2luZGV4fSR7c3ViaW5kZXh9YCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnLCBzdWJpbmRleCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnLCBpbmRleCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLWhhcy1zaGlwJywgc3ViaXRlbS5oYXNTaGlwKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtc2hvdCcsIHN1Yml0ZW0uaXNTaG90KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5jbGFzc0xpc3QuYWRkKGBhdGtEaXYke251bX1gKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi50ZXh0Q29udGVudCA9IHN1Yml0ZW0uaGFzU2hpcDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjAke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzEuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjEke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjIke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzMuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjMke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzQuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjQke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzUuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjUke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzYuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjYke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzcuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjcke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzguYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjgke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzkuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjkke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzEwLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzEpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzIpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzMpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzQpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzUpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzYpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzcpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzgpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzkpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzEwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBhdGtMaXN0ZW5lciA9IChwbGF5ZXIsIGVuZW15LCBudW0pID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gZW5lbXkuYm9hcmQ7XG4gICAgbGV0IHNoaXBzID0gZW5lbXkuc2hpcHM7XG4gICAgbGV0IHJlc3BvbnNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYXRrRGl2JHtudW19YCk7XG4gICAgbGV0IGlzU2hvdDtcbiAgICBsZXQgeVBvaW50O1xuICAgIGxldCB4UG9pbnQ7XG4gICAgbGV0IHNoaXBMZW5ndGg7XG4gICAgbGV0IHNoaXBUeXBlO1xuICAgIGxldCBwb3M1ID0gMDtcbiAgICBsZXQgcG9zNCA9IDA7XG4gICAgbGV0IHBvczMgPSAwO1xuICAgIGxldCBwb3MyID0gMDtcbiAgICBsZXQgcG9zMSA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgcmVzcG9uc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNBY3RpdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB5UG9pbnQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcpO1xuICAgICAgICAgICAgICAgIHhQb2ludCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14LWNvb3JkJyk7XG4gICAgICAgICAgICAgICAgaXNTaG90ID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0uaXNTaG90O1xuICAgICAgICAgICAgICAgIHNoaXBMZW5ndGggPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hQb2ludF1beVBvaW50XS5zaGlwTGVuZ3RoO1xuICAgICAgICAgICAgICAgIHNoaXBUeXBlID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0uc2hpcFR5cGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNTaG90ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWhhcy1zaGlwJykgPT09ICd0cnVlJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmV5JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4UG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh5UG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICBnYW1lQm9hcmQucmVjZWl2ZUF0dGFjayh4UG9pbnQsIHlQb2ludCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVCb2FyZC5hbGxTaGlwc1N1bmsoc2hpcHMpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGxheWVyIHdvbiEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIuYm9hcmQuYWxsU2hpcHNTdW5rKHBsYXllci5zaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wdXRlciB3b24hJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwVHlwZSA9PSAnQ2FycmllcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zNSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHBvczMgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnU3VibWFyaW5lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFsxXS5oaXQocG9zMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MyICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1BhdHJvbGJvYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwb3MxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczEgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIGVuZW15LnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBwbGF5ZXIuZW5lbXlNb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlBdHRhY2socGxheWVyLCBlbmVteSwgY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IGVuZW15QXR0YWNrID0gKHBsYXllciwgZW5lbXksIHgsIHkpID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gcGxheWVyLmJvYXJkO1xuICAgIGxldCBzaGlwcyA9IHBsYXllci5zaGlwcztcbiAgICBsZXQgaXNTaG90ID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5pc1Nob3Q7O1xuICAgIGxldCBoYXNTaGlwID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwO1xuICAgIGxldCBzaGlwTGVuZ3RoID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5zaGlwTGVuZ3RoO1xuICAgIGxldCBzaGlwVHlwZSA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeF1beV0uc2hpcFR5cGU7XG4gICAgbGV0IHBhbmVsO1xuICAgIGlmICh4ID09PSAwKXtcbiAgICAgICAgcGFuZWwgPSB5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhbmVsID0gJycgKyB4ICsgeTtcbiAgICB9XG4gICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2F0a0RpdjEnKVtwYW5lbF07ICBcbiAgICBsZXQgcG9zNSA9IDA7XG4gICAgbGV0IHBvczQgPSAwO1xuICAgIGxldCBwb3MzID0gMDtcbiAgICBsZXQgcG9zMiA9IDA7XG4gICAgbGV0IHBvczEgPSAwO1xuXG4gICAgaWYgKGVuZW15LmlzQWN0aXZlID09PSB0cnVlKSB7XG5cbiAgICAgICAgaWYgKGlzU2hvdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChoYXNTaGlwID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JleSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lQm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGdhbWVCb2FyZC5hbGxTaGlwc1N1bmsoc2hpcHMpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXB1dGVyIHdvbiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVuZW15LmJvYXJkLmFsbFNoaXBzU3VuayhlbmVteS5zaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciB3b24hJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHNoaXBUeXBlID09ICdDYXJyaWVyJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zNSk7XG4gICAgICAgICAgICAgICAgcG9zNSArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnQmF0dGxlc2hpcCcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczQpO1xuICAgICAgICAgICAgICAgIHBvczQgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBvczMpO1xuICAgICAgICAgICAgICAgICAgICBwb3MzICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdTdWJtYXJpbmUnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzFdLmhpdChwb3MyKTtcbiAgICAgICAgICAgICAgICBwb3MyICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdQYXRyb2xib2F0Jykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocG9zMSk7XG4gICAgICAgICAgICAgICAgcG9zMSArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGxheWVyLnRvZ2dsZSgpO1xuICAgICAgICAgICAgZW5lbXkudG9nZ2xlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBwbGF5ZXIuZW5lbXlNb3ZlKCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb29yZGluYXRlcyk7XG4gICAgICAgICAgICBlbmVteUF0dGFjayhwbGF5ZXIsIGVuZW15LCBjb29yZGluYXRlc1swXSwgY29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgIH07XG59O1xuXG5jb25zdCBwbGFjZVBpZWNlcyA9IChwbGF5ZXIpID0+IHtcblxuICAgIGNvbnN0IG9uRHJhZ092ZXIgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGNvbnN0IG9uRHJvcCA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14LWNvb3JkJykpO1xuICAgICAgICBsZXQgeCA9IHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14LWNvb3JkJykpO1xuICAgICAgICBsZXQgeSA9IHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15LWNvb3JkJykpO1xuICAgICAgICAvLyBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICBsZXQgZGF0YSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQnKTtcbiAgICAgICAgbGV0IGNhcnJpZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQ2FycmllcicpO1xuICAgICAgICBsZXQgYmF0dGxlU2hpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNCYXR0bGVzaGlwJyk7XG4gICAgICAgIGxldCBkZXN0cm95ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjRGVzdHJveWVyJyk7XG4gICAgICAgIGxldCBzdWJNYXJpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjU3VibWFyaW5lJyk7XG4gICAgICAgIGxldCBwYXRyb2xCID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1BhdHJvbEJvYXQnKTtcbiAgICAgICAgbGV0IGFsaWduID0gY2Fycmllci5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcik7XG4gICAgICAgIGlmIChkYXRhID09PSAnQ2Fycmllcicpe1xuICAgICAgICAgICAgaWYgKHBsYXllci5zY291dCh4LCB5LCA1LCBhbGlnbikgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCA1LCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDUsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXJyaWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSAnQmF0dGxlc2hpcCcpe1xuICAgICAgICAgICAgaWYgKHBsYXllci5zY291dCh4LCB5LCA0LCBhbGlnbikgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCA0LCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDQsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYXR0bGVTaGlwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdEZXN0cm95ZXInKXtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuc2NvdXQoeCwgeSwgMywgYWxpZ24pID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgMywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVzdHJveWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdTdWJtYXJpbmUnKXtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuc2NvdXQoeCwgeSwgMywgYWxpZ24pID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgMywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3ViTWFyaW5lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdQYXRyb2xCb2F0Jyl7XG4gICAgICAgICAgICBpZiAocGxheWVyLnNjb3V0KHgsIHksIDIsIGFsaWduKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDIsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgMiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhdHJvbEIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmVzcG9uc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhdGtEaXYxJyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgcmVzcG9uc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyKTtcbiAgICAgICAgcmVzcG9uc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcCk7XG4gICAgfTtcblxufVxuXG5jb25zdCBkZVJlbmRlciA9ICgpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWluZXIxXCIpO1xuICAgIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgXG5cbiAgICByZW5kZXJHQm9hcmQsXG4gICAgYXRrTGlzdGVuZXIsXG4gICAgcGxhY2VQaWVjZXMsXG4gICAgZGVSZW5kZXIsXG4gfTsiLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuL3BsYXllckZhY3RvcnknO1xuaW1wb3J0IHsgcmVuZGVyR0JvYXJkLCBhdGtMaXN0ZW5lciwgcGxhY2VQaWVjZXMsIGRlUmVuZGVyIH0gZnJvbSAnLi9yZW5kZXInO1xuXG5jb25zdCBnYW1lID0gKCkgPT4ge1xuXG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnRCdG4nKTtcbiAgICBjb25zdCBhbGlnbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGlnbkJ0bicpO1xuICAgIGNvbnN0IGNhcnJpZXJEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0NhcnJpZXInKTtcbiAgICBjb25zdCBiYXR0bGVEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0JhdHRsZXNoaXAnKTtcbiAgICBjb25zdCBkZXN0ckRyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjRGVzdHJveWVyJyk7XG4gICAgY29uc3Qgc3ViRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNTdWJtYXJpbmUnKTtcbiAgICBjb25zdCBwYXRyb2xEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1BhdHJvbEJvYXQnKTtcbiAgICBjYXJyaWVyRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgYmF0dGxlRHJhZy5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XG4gICAgZGVzdHJEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBzdWJEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBwYXRyb2xEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgY2FycmllckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdyb3cnKTtcblxuICAgIGNvbnN0IHBsYXllckFyciA9IFtcbiAgICAgICAgUGxheWVyKFwicGxheWVyMVwiLCB0cnVlKSxcbiAgICAgICAgUGxheWVyKFwiY29tcHV0ZXJcIiwgZmFsc2UpXG4gICAgXTtcblxuICAgIGNvbnN0IG9uRHJhZ1N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGUudGFyZ2V0LmlkKTtcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgfVxuXG4gICAgY2FycmllckRyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIGJhdHRsZURyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIGRlc3RyRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgc3ViRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgcGF0cm9sRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG5cbiAgICByZW5kZXJHQm9hcmQocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCwgMSk7XG5cbiAgICBhbGlnbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID09PSAncm93Jyl7XG4gICAgICAgICAgICBjYXJyaWVyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBiYXR0bGVEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIGRlc3RyRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBzdWJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIHBhdHJvbERyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgY2FycmllckRyYWcuc2V0QXR0cmlidXRlKCdkYXRhLWFsaWdubWVudCcsICdjb2x1bW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhcnJpZXJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIGJhdHRsZURyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgZGVzdHJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIHN1YkRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgcGF0cm9sRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBjYXJyaWVyRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ3JvdycpO1xuICAgICAgICB9XG5cbiAgICB9KVxuXG4gICAgcGxhY2VQaWVjZXMocGxheWVyQXJyWzBdLmJvYXJkKTtcblxuICAgIC8vY3JlYXRlIHBsYXllciBhbmQgY29tcHV0ZXIgcGxheWVyXG4gICAgLy9wb3B1bGF0ZSBnYW1lYm9hcmRzIGZvciBib3RoIHBsYXllcnNcbiAgICAvLyBwbGFjZVBpZWNlcyhwbGF5ZXJBcnJbMF0uYm9hcmQsIGFsaWduKTtcblxuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgZGVSZW5kZXIoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocGxheWVyQXJyWzBdLmJvYXJkLmdhbWVCb2FyZCk7XG4gICAgICAgIHJlbmRlckdCb2FyZChwbGF5ZXJBcnJbMF0uYm9hcmQuZ2FtZUJvYXJkLCAxKTtcbiAgICAgICAgcGxheWVyQXJyWzFdLmJvYXJkLnBsYWNlSG9yaXpvbnRhbCg4LCAxLCA1LCAnQ2FycmllcicpO1xuICAgICAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VIb3Jpem9udGFsKDMsIDUsIDQsICdCYXR0bGVzaGlwJyk7XG4gICAgICAgIHBsYXllckFyclsxXS5ib2FyZC5wbGFjZUhvcml6b250YWwoNiwgMywgMywgJ0Rlc3Ryb3llcicpO1xuICAgICAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VIb3Jpem9udGFsKDEsIDEsIDMsICdTdWJtYXJpbmUnKTtcbiAgICAgICAgcGxheWVyQXJyWzFdLmJvYXJkLnBsYWNlSG9yaXpvbnRhbCgwLCA2LCAyLCAnUGF0cm9sYm9hdCcpO1xuICAgICAgICByZW5kZXJHQm9hcmQocGxheWVyQXJyWzFdLmJvYXJkLmdhbWVCb2FyZCwgMik7XG4gICAgICAgIGF0a0xpc3RlbmVyKHBsYXllckFyclswXSwgcGxheWVyQXJyWzFdLCAyKTtcbiAgICAgICAgLy8gYXRrTGlzdGVuZXIocGxheWVyQXJyWzFdLCBwbGF5ZXJBcnJbMF0sIDEpO1xuICAgIH0pO1xuXG59O1xuXG5leHBvcnQgeyBnYW1lIH07IiwiaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vZ2FtZSc7XG5cbmdhbWUoKTsiXSwibmFtZXMiOlsic2hpcEZhY3RvcnkiLCJsZW5ndGgiLCJzaGlwIiwiaGl0IiwicG9zIiwiaXNTdW5rIiwiY291bnQiLCJzdW5rIiwiZm9yRWFjaCIsIml0ZW0iLCJQbGF5ZXIiLCJuYW1lIiwiaXNBY3RpdmUiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImRlc3Ryb3llciIsInN1Ym1hcmluZSIsInBhdHJvbEJvYXQiLCJzdGF0ZSIsInRvZ2dsZSIsImJvYXJkIiwiZ2FtZUJvYXJkIiwiaSIsImoiLCJoYXNTaGlwIiwiaXNTaG90Iiwic2hpcExlbmd0aCIsInNoaXBUeXBlIiwieFBvaW50IiwieVBvaW50IiwicGxhY2VIb3Jpem9udGFsIiwieCIsInkiLCJwbGFjZVZlcnQiLCJyZWNlaXZlQXR0YWNrIiwiYWxsU2hpcHNTdW5rIiwiYXJyIiwiZmlsdGVyIiwic2hpcHMiLCJzY291dCIsImFsaWdubWVudCIsInJlcG9ydCIsImdhbWVCb2FyZEZhY3RvcnkiLCJlbmVteU1vdmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyZW5kZXJHQm9hcmQiLCJudW0iLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3cxIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJvdzIiLCJyb3czIiwicm93NCIsInJvdzUiLCJyb3c2Iiwicm93NyIsInJvdzgiLCJyb3c5Iiwicm93MTAiLCJpbmRleCIsInN1Yml0ZW0iLCJzdWJpbmRleCIsInNxdWFyZURpdiIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJlbmVteUF0dGFjayIsInBsYXllciIsImVuZW15IiwicGFuZWwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicG9zNSIsInBvczQiLCJwb3MzIiwicG9zMiIsInBvczEiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImNvbnNvbGUiLCJsb2ciLCJjb29yZGluYXRlcyIsInN0YXJ0QnRuIiwiYWxpZ25CdG4iLCJjYXJyaWVyRHJhZyIsImJhdHRsZURyYWciLCJkZXN0ckRyYWciLCJzdWJEcmFnIiwicGF0cm9sRHJhZyIsImZsZXhEaXJlY3Rpb24iLCJwbGF5ZXJBcnIiLCJvbkRyYWdTdGFydCIsImUiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwidGFyZ2V0IiwiaWQiLCJjdXJyZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uRHJhZ092ZXIiLCJwcmV2ZW50RGVmYXVsdCIsIm9uRHJvcCIsInBhcnNlSW50IiwiZGF0YSIsImdldERhdGEiLCJiYXR0bGVTaGlwIiwic3ViTWFyaW5lIiwicGF0cm9sQiIsImFsaWduIiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNwbGF5IiwicmVzcG9uc2UiLCJwbGFjZVBpZWNlcyIsInBhcmVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRlUmVuZGVyIiwiYXRrTGlzdGVuZXIiLCJnYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==