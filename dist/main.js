(()=>{"use strict";const e=e=>{const t=[];return{ship:t,length:e,hit:e=>t[e]="hit",isSunk:()=>{let r=0,o=!1;return t.forEach((function(e){"hit"===e&&(r+=1)})),o=r===e,o}}},t=(t,r=!1)=>{let o=e(5),i=e(4),l=e(3),a=e(3),n=e(2),s={name:t,isActive:r};return{get name(){return s.name},get isActive(){return s.isActive},toggle(){s.isActive=!s.isActive},board:(()=>{let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];for(let t=0;t<10;t++)for(let r=0;r<10;r++)e[t][r]={hasShip:!1,isShot:!1,shipLength:0,shipType:"n/a",xPoint:0,yPoint:0};return{gameBoard:e,placeHorizontal:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,r+=1;return e},placeVert:(t,r,o,i)=>{for(let l=0;l<o;l++)e[t][r].hasShip=!0,e[t][r].shipLength=o,e[t][r].shipType=i,e[t][r].xPoint=t,e[t][r].yPoint=r,t+=1;return e},receiveAttack:(t,r)=>!0===e[t][r].hasShip?(e[t][r].isShot=!0,"Hit"):(e[t][r].isShot=!0,e),allShipsSunk:e=>e.filter((e=>e.isSunk())).length===e.length,scout:(t,r,o,i)=>{let l=!1;if("row"===i)for(let i=0;i<o;i++)!0===e[t][r].hasShip&&(l=!0),r+=1;else for(let i=0;i<o;i++)!0===e[t][r].hasShip&&(l=!0),t+=1;return l}}})(),ships:[o,i,l,a,n],enemyMove:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())],pos5:0,pos4:0,pos3:0,pos2:0,pos1:0}},r=(e,t)=>{let r=document.querySelector(`#container${t}`),o=document.createElement("div");o.setAttribute("id","row1");let i=document.createElement("div");i.setAttribute("id","row2");let l=document.createElement("div");l.setAttribute("id","row3");let a=document.createElement("div");a.setAttribute("id","row4");let n=document.createElement("div");n.setAttribute("id","row5");let s=document.createElement("div");s.setAttribute("id","row6");let d=document.createElement("div");d.setAttribute("id","row7");let c=document.createElement("div");c.setAttribute("id","row8");let u=document.createElement("div");u.setAttribute("id","row9");let g=document.createElement("div");g.setAttribute("id","row10"),e.forEach((function(e,p){e.forEach((function(e,h){let m=document.createElement("div");m.setAttribute("id",`squareDiv${p}${h}`),m.setAttribute("data-y-coord",h),m.setAttribute("data-x-coord",p),m.setAttribute("data-has-ship",e.hasShip),m.setAttribute("data-is-shot",e.isShot),m.classList.add(`atkDiv${t}`),m.textContent=e.hasShip;for(let e=0;e<10;e++)m.getAttribute("id")==`squareDiv0${e}`?o.appendChild(m):m.getAttribute("id")==`squareDiv1${e}`?i.appendChild(m):m.getAttribute("id")==`squareDiv2${e}`?l.appendChild(m):m.getAttribute("id")==`squareDiv3${e}`?a.appendChild(m):m.getAttribute("id")==`squareDiv4${e}`?n.appendChild(m):m.getAttribute("id")==`squareDiv5${e}`?s.appendChild(m):m.getAttribute("id")==`squareDiv6${e}`?d.appendChild(m):m.getAttribute("id")==`squareDiv7${e}`?c.appendChild(m):m.getAttribute("id")==`squareDiv8${e}`?u.appendChild(m):m.getAttribute("id")==`squareDiv9${e}`&&g.appendChild(m);r.appendChild(o),r.appendChild(i),r.appendChild(l),r.appendChild(a),r.appendChild(n),r.appendChild(s),r.appendChild(d),r.appendChild(c),r.appendChild(u),r.appendChild(g)}))}))},o=(e,t,r,i)=>{let l=e.board;console.log(l);let a,n=e.ships,s=l.gameBoard[r][i].isShot,d=l.gameBoard[r][i].hasShip,c=l.gameBoard[r][i].shipLength,u=l.gameBoard[r][i].shipType;a=0===r?i:""+r+i;let g=document.getElementsByClassName("atkDiv1")[a];if(!0===t.isActive)if(!1===s){if(g.style.backgroundColor=!0===d?"red":"grey",l.receiveAttack(r,i),"Carrier"==u?(n.filter((e=>e.length==c))[0].hit(e.pos5),e.pos5+=1):"Battleship"==u?(n.filter((e=>e.length==c))[0].hit(e.pos4),e.pos4+=1):"Destroyer"==u?(n.filter((e=>e.length==c))[0].hit(e.pos3),e.pos3+=1):"Submarine"==u?(n.filter((e=>e.length==c))[1].hit(e.pos2),e.pos2+=1):"Patrolboat"==u&&(n.filter((e=>e.length==c))[0].hit(e.pos1),e.pos1+=1),!0===l.allShipsSunk(n))return void console.log("Computer won!");if(!0===t.board.allShipsSunk(t.ships))return void console.log("User won!");e.toggle(),t.toggle()}else{let r=e.enemyMove();o(e,t,r[0],r[1])}};(()=>{const e=document.querySelector("#startBtn"),i=document.querySelector("#alignBtn"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),s=document.querySelector("#Submarine"),d=document.querySelector("#Patrolboat");l.classList.add("horizontal"),a.classList.add("horizontal"),n.classList.add("horizontal"),s.classList.add("horizontal"),d.classList.add("horizontal"),l.style.flexDirection="row",l.setAttribute("data-alignment","row");const c=[t("player1",!0),t("computer",!1)],u=e=>{e.dataTransfer.setData("text/plain",e.target.id),e.currentTarget.style.backgroundColor="green"};l.addEventListener("dragstart",u),a.addEventListener("dragstart",u),n.addEventListener("dragstart",u),s.addEventListener("dragstart",u),d.addEventListener("dragstart",u),r(c[0].board.gameBoard,1),i.addEventListener("click",(function(){"row"===l.style.flexDirection?(l.style.flexDirection="column",a.style.flexDirection="column",n.style.flexDirection="column",s.style.flexDirection="column",d.style.flexDirection="column",l.setAttribute("data-alignment","column")):(l.style.flexDirection="row",a.style.flexDirection="row",n.style.flexDirection="row",s.style.flexDirection="row",d.style.flexDirection="row",l.setAttribute("data-alignment","row"))})),(e=>{const t=e=>{e.preventDefault()},r=t=>{t.preventDefault(),console.log(t.target.getAttribute("data-y-coord")),console.log(t.target.getAttribute("data-x-coord"));let r=parseInt(t.target.getAttribute("data-x-coord")),o=parseInt(t.target.getAttribute("data-y-coord")),i=t.dataTransfer.getData("text"),l=document.querySelector("#Carrier"),a=document.querySelector("#Battleship"),n=document.querySelector("#Destroyer"),s=document.querySelector("#Submarine"),d=document.querySelector("#Patrolboat"),c=l.getAttribute("data-alignment");if(console.log(e),"Carrier"===i&&!1===e.scout(r,o,5,c)){if("row"===c){e.placeHorizontal(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,5,i);for(let e=0;e<5;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}l.style.display="none"}if("Battleship"===i&&!1===e.scout(r,o,4,c)){if("row"===c){e.placeHorizontal(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,4,i);for(let e=0;e<4;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}a.style.display="none"}if("Destroyer"===i&&!1===e.scout(r,o,3,c)){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}n.style.display="none"}if("Submarine"===i&&!1===e.scout(r,o,3,c)){if("row"===c){e.placeHorizontal(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,3,i);for(let e=0;e<3;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}s.style.display="none"}if("Patrolboat"===i&&!1===e.scout(r,o,2,c)){if("row"===c){e.placeHorizontal(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",o++}else if("column"===c){e.placeVert(r,o,2,i);for(let e=0;e<2;e++)document.getElementById(`squareDiv${r}${o}`).style.backgroundColor="green",r++}d.style.display="none"}};let o=document.getElementsByClassName("atkDiv1");for(let e=0;e<o.length;e++)o[e].addEventListener("dragover",t),o[e].addEventListener("drop",r)})(c[0].board),e.addEventListener("click",(function(){(()=>{let e=document.querySelector("#container1");for(;e.firstChild;)e.removeChild(e.firstChild)})(),r(c[0].board.gameBoard,1),c[1].board.placeHorizontal(8,1,5,"Carrier"),c[1].board.placeHorizontal(3,5,4,"Battleship"),c[1].board.placeHorizontal(6,3,3,"Destroyer"),c[1].board.placeHorizontal(1,1,3,"Submarine"),c[1].board.placeHorizontal(0,6,2,"Patrolboat"),r(c[1].board.gameBoard,2),((e,t,r)=>{let i,l,a,n,s,d=t.board,c=t.ships,u=document.getElementsByClassName("atkDiv2");for(let r=0;r<u.length;r++)u[r].addEventListener("click",(function(r){if(!0===e.isActive&&(l=r.target.getAttribute("data-y-coord"),a=r.target.getAttribute("data-x-coord"),i=d.gameBoard[a][l].isShot,n=d.gameBoard[a][l].shipLength,s=d.gameBoard[a][l].shipType,!1===i)){if("true"===r.target.getAttribute("data-has-ship")?r.target.style.backgroundColor="red":r.target.style.backgroundColor="grey",console.log(a),console.log(l),d.receiveAttack(a,l),"Carrier"==s){let e=c.filter((e=>e.length==n));console.log(e),e[0].hit(t.pos5),t.pos5+=1}else"Battleship"==s?(c.filter((e=>e.length==n))[0].hit(t.pos4),t.pos4+=1):"Destroyer"==s?(c.filter((e=>e.length==n))[0].hit(t.pos3),t.pos3+=1):"Submarine"==s?(c.filter((e=>e.length==n))[1].hit(t.pos2),t.pos2+=1):"Patrolboat"==s&&(c.filter((e=>e.length==n))[0].hit(t.pos1),t.pos1+=1);if(!0===d.allShipsSunk(c))return console.log("Player won!"),void e.toggle();if(!0===e.board.allShipsSunk(e.ships))return console.log("Computer won!"),void t.toggle();e.toggle(),t.toggle();let i=e.enemyMove();console.log(i),o(e,t,i[0],i[1])}}))})(c[0],c[1])}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxZQUN6QnNDLFFBQVFDLElBQUlLLEdBQ1pULEVBQVlDLEVBQVFDLEVBQU9PLEVBQVksR0FBSUEsRUFBWSxTQ3pFbkVxQyxDQUFZNUIsRUFBVSxHQUFJQSxFQUFVLFFDbkU1QzZCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVCb2FyZEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllckZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2hpcEZhY3RvcnkgfSBmcm9tICcuL3NoaXBGYWN0b3J5JztcblxuY29uc3QgZ2FtZUJvYXJkRmFjdG9yeSA9ICgpID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gW1xuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICAgICAgKFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSksXG4gICAgICAgIChbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0pLFxuICAgICAgICAoW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdKSxcbiAgICBdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbaV1bal0gPSAoe2hhc1NoaXA6IGZhbHNlLCBpc1Nob3Q6IGZhbHNlLCBzaGlwTGVuZ3RoOiAwLCBzaGlwVHlwZTogJ24vYScsIHhQb2ludDogMCwgeVBvaW50OiAwfSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuXG4gICAgY29uc3QgcGxhY2VIb3Jpem9udGFsID0gKHgsIHksIHNoaXBMZW5ndGgsIHNoaXBUeXBlKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5zaGlwTGVuZ3RoID0gc2hpcExlbmd0aDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5zaGlwVHlwZSA9IHNoaXBUeXBlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnhQb2ludCA9IHg7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueVBvaW50ID0geTtcbiAgICAgICAgICAgIHkgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICAgIH1cbiAgICBjb25zdCBwbGFjZVZlcnQgPSAoeCwgeSwgc2hpcExlbmd0aCwgc2hpcFR5cGUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXAgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGggPSBzaGlwTGVuZ3RoO1xuICAgICAgICAgICAgZ2FtZUJvYXJkW3hdW3ldLnNoaXBUeXBlID0gc2hpcFR5cGU7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0ueFBvaW50ID0geDtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS55UG9pbnQgPSB5O1xuICAgICAgICAgICAgeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gICAgfVxuXG4gICAgY29uc3Qgc2NvdXQgPSAoeCwgeSwgc2hpcExlbmd0aCwgYWxpZ25tZW50KSA9PiB7XG4gICAgICAgIGxldCByZXBvcnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGFsaWdubWVudCA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGxldCBhbmFseXNpcyA9IGdhbWVCb2FyZFt4XVt5XS5oYXNTaGlwO1xuICAgICAgICAgICAgICAgIGlmICggYW5hbHlzaXMgPT09IHRydWUgKXtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ID0gdHJ1ZTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBsZXQgYW5hbHlzaXMgPSBnYW1lQm9hcmRbeF1beV0uaGFzU2hpcDtcbiAgICAgICAgICAgICAgICBpZiAoYW5hbHlzaXMgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICByZXBvcnQgPSB0cnVlOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBvcnQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmRbeF1beV0uaGFzU2hpcCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICBnYW1lQm9hcmRbeF1beV0uaXNTaG90ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAnSGl0JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdhbWVCb2FyZFt4XVt5XS5pc1Nob3QgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBhbGxTaGlwc1N1bmsgPSAoYXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1bmtlblNoaXBzID0gYXJyLmZpbHRlcihzaGlwcyA9PiBzaGlwcy5pc1N1bmsoKSk7XG4gICAgICAgIGlmIChzdW5rZW5TaGlwcy5sZW5ndGggPT09IGFyci5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdhbWVCb2FyZCxcbiAgICAgICAgcGxhY2VIb3Jpem9udGFsLFxuICAgICAgICBwbGFjZVZlcnQsXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIGFsbFNoaXBzU3VuayxcbiAgICAgICAgc2NvdXQsXG4gICAgfVxufTtcblxuZXhwb3J0IHsgZ2FtZUJvYXJkRmFjdG9yeSB9OyIsIlxuY29uc3Qgc2hpcEZhY3RvcnkgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFtdO1xuXG4gICAgY29uc3QgaGl0ID0gKHBvcykgPT4gc2hpcFtwb3NdID0gJ2hpdCc7XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGxldCBzdW5rID0gZmFsc2U7XG5cbiAgICAgICAgc2hpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICdoaXQnKXtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvdW50ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN1bmsgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VuayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1bms7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNoaXAsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgaGl0LFxuICAgICAgICBpc1N1bmssXG4gICAgfVxufTtcblxuZXhwb3J0IHsgc2hpcEZhY3RvcnkgfTsiLCJpbXBvcnQgeyBnYW1lQm9hcmRGYWN0b3J5IH0gZnJvbSAnLi9nYW1lQm9hcmRGYWN0b3J5JztcbmltcG9ydCB7IHNoaXBGYWN0b3J5IH0gZnJvbSAnLi9zaGlwRmFjdG9yeSc7XG5cbmNvbnN0IFBsYXllciA9IChuYW1lLCBpc0FjdGl2ZSA9IGZhbHNlKSA9PiB7XG5cbiAgICBsZXQgY2FycmllciA9IHNoaXBGYWN0b3J5KDUpO1xuICAgIGxldCBiYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoNCk7XG4gICAgbGV0IGRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KDMpO1xuICAgIGxldCBzdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgzKTtcbiAgICBsZXQgcGF0cm9sQm9hdCA9IHNoaXBGYWN0b3J5KDIpO1xuICAgIFxuICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaXNBY3RpdmUsXG4gICAgfVxuXG4gICAgbGV0IGJvYXJkID0gZ2FtZUJvYXJkRmFjdG9yeSgpO1xuXG4gICAgbGV0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGRlc3Ryb3llciwgc3VibWFyaW5lLCBwYXRyb2xCb2F0XTtcblxuICAgIGNvbnN0IGVuZW15TW92ZSA9ICgpID0+IHtcbiAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApKTtcblxuICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cbiAgICBsZXQgcG9zNSA9IDA7XG4gICAgbGV0IHBvczQgPSAwO1xuICAgIGxldCBwb3MzID0gMDtcbiAgICBsZXQgcG9zMiA9IDA7XG4gICAgbGV0IHBvczEgPSAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IG5hbWUoKXtyZXR1cm4gc3RhdGUubmFtZTt9LFxuICAgICAgICBnZXQgaXNBY3RpdmUoKXtyZXR1cm4gc3RhdGUuaXNBY3RpdmU7fSxcbiAgICAgICAgdG9nZ2xlKCl7IHN0YXRlLmlzQWN0aXZlID0gIXN0YXRlLmlzQWN0aXZlO30sXG4gICAgICAgIGJvYXJkLFxuICAgICAgICBzaGlwcyxcbiAgICAgICAgZW5lbXlNb3ZlLFxuICAgICAgICBwb3M1LFxuICAgICAgICBwb3M0LFxuICAgICAgICBwb3MzLFxuICAgICAgICBwb3MyLFxuICAgICAgICBwb3MxLFxuICAgIH1cbn07XG5cbmV4cG9ydCB7IFBsYXllciB9OyIsImNvbnN0IHJlbmRlckdCb2FyZCA9IChnYW1lQm9hcmQsIG51bSkgPT4ge1xuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY29udGFpbmVyJHtudW19YCk7XG4gICAgbGV0IHJvdzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cxLnNldEF0dHJpYnV0ZSgnaWQnLCAncm93MScpO1xuICAgIGxldCByb3cyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93Mi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzInKTtcbiAgICBsZXQgcm93MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzMuc2V0QXR0cmlidXRlKCdpZCcsICdyb3czJyk7XG4gICAgbGV0IHJvdzQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c0LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NCcpO1xuICAgIGxldCByb3c1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93NS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzUnKTtcbiAgICBsZXQgcm93NiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzYuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c2Jyk7XG4gICAgbGV0IHJvdzcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3c3LnNldEF0dHJpYnV0ZSgnaWQnLCAncm93NycpO1xuICAgIGxldCByb3c4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93OC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JvdzgnKTtcbiAgICBsZXQgcm93OSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJvdzkuc2V0QXR0cmlidXRlKCdpZCcsICdyb3c5Jyk7XG4gICAgbGV0IHJvdzEwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93MTAuc2V0QXR0cmlidXRlKCdpZCcsICdyb3cxMCcpO1xuXG4gICAgZ2FtZUJvYXJkLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaXRlbS5mb3JFYWNoKGZ1bmN0aW9uKHN1Yml0ZW0sIHN1YmluZGV4KSB7XG4gICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdpZCcsIGBzcXVhcmVEaXYke2luZGV4fSR7c3ViaW5kZXh9YCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnLCBzdWJpbmRleCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnLCBpbmRleCk7XG4gICAgICAgICAgICBzcXVhcmVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLWhhcy1zaGlwJywgc3ViaXRlbS5oYXNTaGlwKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtc2hvdCcsIHN1Yml0ZW0uaXNTaG90KTtcbiAgICAgICAgICAgIHNxdWFyZURpdi5jbGFzc0xpc3QuYWRkKGBhdGtEaXYke251bX1gKTtcbiAgICAgICAgICAgIHNxdWFyZURpdi50ZXh0Q29udGVudCA9IHN1Yml0ZW0uaGFzU2hpcDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjAke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzEuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjEke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjIke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzMuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjMke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzQuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjQke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzUuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjUke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzYuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjYke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzcuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjcke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzguYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjgke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzkuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZURpdi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT0gYHNxdWFyZURpdjkke2l9YCl7XG4gICAgICAgICAgICAgICAgICAgIHJvdzEwLmFwcGVuZENoaWxkKHNxdWFyZURpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzEpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzIpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzMpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzQpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzUpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzYpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzcpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzgpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzkpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdzEwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBhdGtMaXN0ZW5lciA9IChwbGF5ZXIsIGVuZW15LCBudW0pID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gZW5lbXkuYm9hcmQ7XG4gICAgbGV0IHNoaXBzID0gZW5lbXkuc2hpcHM7XG4gICAgbGV0IHJlc3BvbnNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYXRrRGl2JHtudW19YCk7XG4gICAgbGV0IGlzU2hvdDtcbiAgICBsZXQgeVBvaW50O1xuICAgIGxldCB4UG9pbnQ7XG4gICAgbGV0IHNoaXBMZW5ndGg7XG4gICAgbGV0IHNoaXBUeXBlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHJlc3BvbnNlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzQWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgeVBvaW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKTtcbiAgICAgICAgICAgICAgICB4UG9pbnQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteC1jb29yZCcpO1xuICAgICAgICAgICAgICAgIGlzU2hvdCA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLmlzU2hvdDtcbiAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0uc2hpcExlbmd0aDtcbiAgICAgICAgICAgICAgICBzaGlwVHlwZSA9IGdhbWVCb2FyZC5nYW1lQm9hcmRbeFBvaW50XVt5UG9pbnRdLnNoaXBUeXBlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzU2hvdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1oYXMtc2hpcCcpID09PSAndHJ1ZScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JleSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeFBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2soeFBvaW50LCB5UG9pbnQpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBUeXBlID09ICdDYXJyaWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaGl0U2hpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChlbmVteS5wb3M1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnBvczUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnQmF0dGxlc2hpcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KGVuZW15LnBvczQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkucG9zNCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChlbmVteS5wb3MzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnBvczMgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnU3VibWFyaW5lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0U2hpcFsxXS5oaXQoZW5lbXkucG9zMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteS5wb3MyICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ1BhdHJvbGJvYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChlbmVteS5wb3MxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnBvczEgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZUJvYXJkLmFsbFNoaXBzU3VuayhzaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgd29uIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuYm9hcmQuYWxsU2hpcHNTdW5rKHBsYXllci5zaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wdXRlciB3b24hJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIGVuZW15LnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBwbGF5ZXIuZW5lbXlNb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlBdHRhY2socGxheWVyLCBlbmVteSwgY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZ2FtZUJvYXJkLmdhbWVCb2FyZFt4UG9pbnRdW3lQb2ludF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IGVuZW15QXR0YWNrID0gKHBsYXllciwgZW5lbXksIHgsIHkpID0+IHtcbiAgICBsZXQgZ2FtZUJvYXJkID0gcGxheWVyLmJvYXJkO1xuICAgIGNvbnNvbGUubG9nKGdhbWVCb2FyZCk7XG4gICAgbGV0IHNoaXBzID0gcGxheWVyLnNoaXBzO1xuICAgIGxldCBpc1Nob3QgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmlzU2hvdDs7XG4gICAgbGV0IGhhc1NoaXAgPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLmhhc1NoaXA7XG4gICAgbGV0IHNoaXBMZW5ndGggPSBnYW1lQm9hcmQuZ2FtZUJvYXJkW3hdW3ldLnNoaXBMZW5ndGg7XG4gICAgbGV0IHNoaXBUeXBlID0gZ2FtZUJvYXJkLmdhbWVCb2FyZFt4XVt5XS5zaGlwVHlwZTtcbiAgICBsZXQgcGFuZWw7XG4gICAgaWYgKHggPT09IDApe1xuICAgICAgICBwYW5lbCA9IHk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGFuZWwgPSAnJyArIHggKyB5O1xuICAgIH1cbiAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXRrRGl2MScpW3BhbmVsXTsgIFxuXG5cbiAgICBpZiAoZW5lbXkuaXNBY3RpdmUgPT09IHRydWUpIHtcblxuICAgICAgICBpZiAoaXNTaG90ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKGhhc1NoaXAgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmV5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuXG4gICAgICAgICAgICBpZiAoc2hpcFR5cGUgPT0gJ0NhcnJpZXInKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwbGF5ZXIucG9zNSk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBvczUgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGhpdFNoaXAgPSBzaGlwcy5maWx0ZXIoc2hpcCA9PiBzaGlwLmxlbmd0aCA9PSBzaGlwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBoaXRTaGlwWzBdLmhpdChwbGF5ZXIucG9zNCk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBvczQgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hpcFR5cGUgPT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaGl0U2hpcCA9IHNoaXBzLmZpbHRlcihzaGlwID0+IHNoaXAubGVuZ3RoID09IHNoaXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGhpdFNoaXBbMF0uaGl0KHBsYXllci5wb3MzKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucG9zMyArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGlwVHlwZSA9PSAnU3VibWFyaW5lJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFsxXS5oaXQocGxheWVyLnBvczIpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wb3MyICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoaXBUeXBlID09ICdQYXRyb2xib2F0Jykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBoaXRTaGlwID0gc2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5sZW5ndGggPT0gc2hpcExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaGl0U2hpcFswXS5oaXQocGxheWVyLnBvczEpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wb3MxICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZUJvYXJkLmFsbFNoaXBzU3VuayhzaGlwcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcHV0ZXIgd29uIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmVteS5ib2FyZC5hbGxTaGlwc1N1bmsoZW5lbXkuc2hpcHMpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgd29uIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwbGF5ZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICBlbmVteS50b2dnbGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlcyA9IHBsYXllci5lbmVteU1vdmUoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIGVuZW15QXR0YWNrKHBsYXllciwgZW5lbXksIGNvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1sxXSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfTtcbn07XG5cbmNvbnN0IHBsYWNlUGllY2VzID0gKHBsYXllcikgPT4ge1xuXG4gICAgY29uc3Qgb25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgY29uc3Qgb25Ecm9wID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteS1jb29yZCcpKTtcbiAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKSk7XG4gICAgICAgIGxldCB4ID0gcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtY29vcmQnKSk7XG4gICAgICAgIGxldCB5ID0gcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXktY29vcmQnKSk7XG4gICAgICAgIC8vIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgIGxldCBkYXRhID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dCcpO1xuICAgICAgICBsZXQgY2FycmllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNDYXJyaWVyJyk7XG4gICAgICAgIGxldCBiYXR0bGVTaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0JhdHRsZXNoaXAnKTtcbiAgICAgICAgbGV0IGRlc3Ryb3llciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNEZXN0cm95ZXInKTtcbiAgICAgICAgbGV0IHN1Yk1hcmluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNTdWJtYXJpbmUnKTtcbiAgICAgICAgbGV0IHBhdHJvbEIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjUGF0cm9sYm9hdCcpO1xuICAgICAgICBsZXQgYWxpZ24gPSBjYXJyaWVyLmdldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnKTtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyKTtcbiAgICAgICAgaWYgKGRhdGEgPT09ICdDYXJyaWVyJyl7XG4gICAgICAgICAgICBpZiAocGxheWVyLnNjb3V0KHgsIHksIDUsIGFsaWduKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDUsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgNSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhcnJpZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgPT09ICdCYXR0bGVzaGlwJyl7XG4gICAgICAgICAgICBpZiAocGxheWVyLnNjb3V0KHgsIHksIDQsIGFsaWduKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbiA9PT0gJ3Jvdycpe1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VIb3Jpem9udGFsKHgsIHksIDQsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZVZlcnQoeCwgeSwgNCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhdHRsZVNoaXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PT0gJ0Rlc3Ryb3llcicpe1xuICAgICAgICAgICAgaWYgKHBsYXllci5zY291dCh4LCB5LCAzLCBhbGlnbikgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZXN0cm95ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PT0gJ1N1Ym1hcmluZScpe1xuICAgICAgICAgICAgaWYgKHBsYXllci5zY291dCh4LCB5LCAzLCBhbGlnbikgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlSG9yaXpvbnRhbCh4LCB5LCAzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnY29sdW1uJykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxhY2VWZXJ0KHgsIHksIDMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXJlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNxdWFyZURpdiR7eH0ke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdWJNYXJpbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PT0gJ1BhdHJvbGJvYXQnKXtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuc2NvdXQoeCwgeSwgMiwgYWxpZ24pID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWduID09PSAncm93Jyl7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wbGFjZUhvcml6b250YWwoeCwgeSwgMiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhcmVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc3F1YXJlRGl2JHt4fSR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYWNlVmVydCh4LCB5LCAyLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFyZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzcXVhcmVEaXYke3h9JHt5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGF0cm9sQi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByZXNwb25zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2F0a0RpdjEnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UubGVuZ3RoOyBpKyspe1xuICAgICAgICByZXNwb25zZVtpXS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJhZ092ZXIpO1xuICAgICAgICByZXNwb25zZVtpXS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wKTtcbiAgICB9O1xuXG59XG5cbmNvbnN0IGRlUmVuZGVyID0gKCkgPT4ge1xuICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRhaW5lcjFcIik7XG4gICAgd2hpbGUgKHBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBcblxuICAgIHJlbmRlckdCb2FyZCxcbiAgICBhdGtMaXN0ZW5lcixcbiAgICBwbGFjZVBpZWNlcyxcbiAgICBkZVJlbmRlcixcbiB9OyIsImltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vcGxheWVyRmFjdG9yeSc7XG5pbXBvcnQgeyByZW5kZXJHQm9hcmQsIGF0a0xpc3RlbmVyLCBwbGFjZVBpZWNlcywgZGVSZW5kZXIgfSBmcm9tICcuL3JlbmRlcic7XG5cbmNvbnN0IGdhbWUgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGFydEJ0bicpO1xuICAgIGNvbnN0IGFsaWduQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsaWduQnRuJyk7XG4gICAgY29uc3QgY2FycmllckRyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQ2FycmllcicpO1xuICAgIGNvbnN0IGJhdHRsZURyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQmF0dGxlc2hpcCcpO1xuICAgIGNvbnN0IGRlc3RyRHJhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNEZXN0cm95ZXInKTtcbiAgICBjb25zdCBzdWJEcmFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1N1Ym1hcmluZScpO1xuICAgIGNvbnN0IHBhdHJvbERyYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjUGF0cm9sYm9hdCcpO1xuICAgIGNhcnJpZXJEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBiYXR0bGVEcmFnLmNsYXNzTGlzdC5hZGQoJ2hvcml6b250YWwnKTtcbiAgICBkZXN0ckRyYWcuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgIHN1YkRyYWcuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgIHBhdHJvbERyYWcuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgIGNhcnJpZXJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICBjYXJyaWVyRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ3JvdycpO1xuXG4gICAgY29uc3QgcGxheWVyQXJyID0gW1xuICAgICAgICBQbGF5ZXIoXCJwbGF5ZXIxXCIsIHRydWUpLFxuICAgICAgICBQbGF5ZXIoXCJjb21wdXRlclwiLCBmYWxzZSlcbiAgICBdO1xuXG4gICAgY29uc3Qgb25EcmFnU3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZS50YXJnZXQuaWQpO1xuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICB9XG5cbiAgICBjYXJyaWVyRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgYmF0dGxlRHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgZGVzdHJEcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcbiAgICBzdWJEcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcbiAgICBwYXRyb2xEcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcblxuICAgIHJlbmRlckdCb2FyZChwbGF5ZXJBcnJbMF0uYm9hcmQuZ2FtZUJvYXJkLCAxKTtcblxuICAgIGFsaWduQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKGNhcnJpZXJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPT09ICdyb3cnKXtcbiAgICAgICAgICAgIGNhcnJpZXJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIGJhdHRsZURyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgZGVzdHJEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgICAgIHN1YkRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICAgICAgcGF0cm9sRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgICAgICBjYXJyaWVyRHJhZy5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ25tZW50JywgJ2NvbHVtbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FycmllckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgYmF0dGxlRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBkZXN0ckRyYWcuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdyb3cnO1xuICAgICAgICAgICAgc3ViRHJhZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XG4gICAgICAgICAgICBwYXRyb2xEcmFnLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgICAgIGNhcnJpZXJEcmFnLnNldEF0dHJpYnV0ZSgnZGF0YS1hbGlnbm1lbnQnLCAncm93Jyk7XG4gICAgICAgIH1cblxuICAgIH0pXG5cbiAgICBwbGFjZVBpZWNlcyhwbGF5ZXJBcnJbMF0uYm9hcmQpO1xuXG4gICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBkZVJlbmRlcigpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwbGF5ZXJBcnJbMF0uYm9hcmQuZ2FtZUJvYXJkKTtcbiAgICAgICAgcmVuZGVyR0JvYXJkKHBsYXllckFyclswXS5ib2FyZC5nYW1lQm9hcmQsIDEpO1xuICAgICAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VIb3Jpem9udGFsKDgsIDEsIDUsICdDYXJyaWVyJyk7XG4gICAgICAgIHBsYXllckFyclsxXS5ib2FyZC5wbGFjZUhvcml6b250YWwoMywgNSwgNCwgJ0JhdHRsZXNoaXAnKTtcbiAgICAgICAgcGxheWVyQXJyWzFdLmJvYXJkLnBsYWNlSG9yaXpvbnRhbCg2LCAzLCAzLCAnRGVzdHJveWVyJyk7XG4gICAgICAgIHBsYXllckFyclsxXS5ib2FyZC5wbGFjZUhvcml6b250YWwoMSwgMSwgMywgJ1N1Ym1hcmluZScpO1xuICAgICAgICBwbGF5ZXJBcnJbMV0uYm9hcmQucGxhY2VIb3Jpem9udGFsKDAsIDYsIDIsICdQYXRyb2xib2F0Jyk7XG4gICAgICAgIHJlbmRlckdCb2FyZChwbGF5ZXJBcnJbMV0uYm9hcmQuZ2FtZUJvYXJkLCAyKTtcbiAgICAgICAgYXRrTGlzdGVuZXIocGxheWVyQXJyWzBdLCBwbGF5ZXJBcnJbMV0sIDIpO1xuICAgIH0pO1xuXG59O1xuXG5leHBvcnQgeyBnYW1lIH07IiwiaW1wb3J0IHsgZ2FtZSB9IGZyb20gJy4vZ2FtZSc7XG5cbmdhbWUoKTsiXSwibmFtZXMiOlsic2hpcEZhY3RvcnkiLCJsZW5ndGgiLCJzaGlwIiwiaGl0IiwicG9zIiwiaXNTdW5rIiwiY291bnQiLCJzdW5rIiwiZm9yRWFjaCIsIml0ZW0iLCJQbGF5ZXIiLCJuYW1lIiwiaXNBY3RpdmUiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImRlc3Ryb3llciIsInN1Ym1hcmluZSIsInBhdHJvbEJvYXQiLCJzdGF0ZSIsInRvZ2dsZSIsImJvYXJkIiwiZ2FtZUJvYXJkIiwiaSIsImoiLCJoYXNTaGlwIiwiaXNTaG90Iiwic2hpcExlbmd0aCIsInNoaXBUeXBlIiwieFBvaW50IiwieVBvaW50IiwicGxhY2VIb3Jpem9udGFsIiwieCIsInkiLCJwbGFjZVZlcnQiLCJyZWNlaXZlQXR0YWNrIiwiYWxsU2hpcHNTdW5rIiwiYXJyIiwiZmlsdGVyIiwic2hpcHMiLCJzY291dCIsImFsaWdubWVudCIsInJlcG9ydCIsImdhbWVCb2FyZEZhY3RvcnkiLCJlbmVteU1vdmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3M1IiwicG9zNCIsInBvczMiLCJwb3MyIiwicG9zMSIsInJlbmRlckdCb2FyZCIsIm51bSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJvdzEiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicm93MiIsInJvdzMiLCJyb3c0Iiwicm93NSIsInJvdzYiLCJyb3c3Iiwicm93OCIsInJvdzkiLCJyb3cxMCIsImluZGV4Iiwic3ViaXRlbSIsInN1YmluZGV4Iiwic3F1YXJlRGl2IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJnZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImVuZW15QXR0YWNrIiwicGxheWVyIiwiZW5lbXkiLCJjb25zb2xlIiwibG9nIiwicGFuZWwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb29yZGluYXRlcyIsInN0YXJ0QnRuIiwiYWxpZ25CdG4iLCJjYXJyaWVyRHJhZyIsImJhdHRsZURyYWciLCJkZXN0ckRyYWciLCJzdWJEcmFnIiwicGF0cm9sRHJhZyIsImZsZXhEaXJlY3Rpb24iLCJwbGF5ZXJBcnIiLCJvbkRyYWdTdGFydCIsImUiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwidGFyZ2V0IiwiaWQiLCJjdXJyZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uRHJhZ092ZXIiLCJwcmV2ZW50RGVmYXVsdCIsIm9uRHJvcCIsInBhcnNlSW50IiwiZGF0YSIsImdldERhdGEiLCJiYXR0bGVTaGlwIiwic3ViTWFyaW5lIiwicGF0cm9sQiIsImFsaWduIiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNwbGF5IiwicmVzcG9uc2UiLCJwbGFjZVBpZWNlcyIsInBhcmVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImRlUmVuZGVyIiwiaGl0U2hpcCIsImF0a0xpc3RlbmVyIiwiZ2FtZSJdLCJzb3VyY2VSb290IjoiIn0=